<!DOCTYPE html>
<html>

<head>
    <title> Task Tracking Helper </title>
    <meta charset="UTF-8">
    <link href="https://fonts.googleapis.com/css?family=Maven+Pro&display=swap" rel="stylesheet">
    <link href="style.css" rel="stylesheet">
    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
    <link rel="manifest" href="site.webmanifest">
<style type="text/css">
body {
    font-family: 'Maven Pro', sans-serif;
    margin: 0px;
    padding: 0px;
    border: none;
}
option{
    height: 24px;
    font-size: small;
}

div#content {
    display: grid;
    grid-template-columns: 24em auto;
    grid-template-rows: 64px auto;
    overflow: hidden;
    height: 100vh;
    font-size: small;
}

#main-controls , #stats-header{
    display: flex;
    padding-left: 0.4em;
    text-align: left;
    align-items: center;
    flex-direction: row;
    background: rgb(43, 128, 0);
    color: white;

}
#stats-header{
    font-size: 1.5em;
    font-weight: bolder;

}

#entry {
    display: flex;
    flex-direction: column;
    justify-self: auto;
    margin: 4px;
    border: 2px solid rgb(43, 128, 0);
    border-radius: 8px;
}
#tasks-info{
    margin-left: 0.5em;
    margin-right: 0.5em;
    display: flex;
    flex-direction: column;

}

#log {
    display: flex;
    overflow-x: hidden;
    overflow-y: scroll;
    margin: 0.5em;
    flex-direction: column;
}

#in-fields {
    display: grid;
    margin: 0.5em;
    font-size: 1em;
    grid-template-columns: auto 32px;
    grid-template-rows: auto ;
    grid-gap: 4px;
    justify-items: left;
    align-items: left;
    height: auto;
    margin-bottom: 1.5em;
}
.input-field {
    height:20px;
    margin: 0px;
    padding: 0px;
    border-left: none;
    border-right: none;
    border-top: none;
    border-bottom: 1px solid darkgray;
    font-size: 12px;
    width: 100%;
}
.input-field:focus{
    outline: none;
    border-left: none;
    border-right: none;
    border-top: none;
    border-bottom: 1px solid  rgb(73, 158, 0);

}
.input-field-container{
    width: 100%;
    display: grid;
    grid-template-columns: 100%;
    grid-template-rows: 12px 20px;
    height: 32px;
}

.input-field-label{
    margin: 0pxx;
    padding: 1px;
    height: 12px;
    color: rgb(59, 59, 59);
    font-size: 10px;
}

input.radio-option{display:none; width:0px; visibility: hidden;} 
input {
    border: 1px solid gray;
    width: 100%;
}

.check {
    width: 100%;
    height: 100%;
}

.label {
    justify-self: left;
}

.task {
    padding: 0em;
    padding-bottom: 0.1em;
}

.record-controls {
    margin: 4px;
    display: flex;
    flex-direction: row;
    justify-content: flex-end;
}
.control-btn{
    width: 80px;
    height: 32px;
    font-size: small;
    margin-left: 4px;
    background: whitesmoke;
    border: 1px solid gray;
    border-radius: 4px;
}
button.copy {
    display: flex;
    place-content: center;
    margin: none;
    padding: none;
    border: 1px solid darkgray;
    border-radius: 4px;
    background: whitesmoke;
    color: black;
    font-size: 1.8em;
    width: 32px;
    height: 32px;
}
button.copy:active {
    background: lightgray;
}
.delete-btn {
    margin-top: 1.5em;
    margin-left: none;
    margin-right: none;
    margin-bottom: none;
    padding: none;
    border: 1px solid darkgray;
    border-radius: 4px;
    background: whitesmoke;
    font-size: 1.8em;
    width: 32px;
    height: 32px;
}
.delete-btn:active {
    background: lightgray;
}
button.copy:focus {
    outline: none;
}
#comments-text {
    resize: none;
    flex-grow: 2;
    padding: 0.5em;
    font-size: small;
    border: 1px solid darkgray;
    border-radius: 4px;
}
#comments{
    margin: 4px;
    flex-grow: 2;
    display: inline-flex;
}
.record-container{
    height: min-content;
    display: grid;
    margin-left: 0.5em;
    grid-template-columns: 32px auto ;
    grid-template-rows: 32px auto ;
    margin: 4px;

}
.record-header{
    grid-column-start: 1;
    grid-column-end: 1;
    grid-row-start: 2;
    display: inline-flex;
    flex-direction: column;
    justify-content: top;
    align-items: center;
}
h3.count{
    text-align: center;
}
label.small-label{
    font-size: smaller;
    font-weight: bold;
    padding-right: 4px;
}
.record {
    margin-left: 4px;
    border:  1px solid gray;
    border-radius: 4px;
    white-space: pre-line;
    grid-column-start: 2;
    grid-row-start: 1;
    grid-row-end: 3;
    padding: 1em;
}
.record-untracked{
    background: rgb(255, 255, 179);
}
.record-tracked{
    background: rgb(179, 255, 179);
}
.emoticon{
    font-size: 1.5em;
    font-family: Arial, Helvetica, sans-serif;
}
.outcomes-container{
    display: inline-flex;
    flex-direction: row;
    font-size: small;
    justify-content: flex-end;
    align-content: flex-end;
    margin-bottom: 0.25em;
    padding-bottom: 0.25em;
    border-bottom: 1px solid green;
}
.to-unchecked {
    background: lightgray;
    color:  gray;
    padding:0.15em;
    border: 1px solid darkgray;
    border-radius: 0.2em;
    margin-left: 4px;
}
.to-checked {
    border: 1px solid green;
    background: greenyellow;
    padding:0.15em;
    border-radius: 0.2em;
    margin-left: 4px;
}
/* Records Group info*/

.rg-info{
    flex-grow: 2;
    display: flex;
    padding: 0px;
    height: 100%;
    margin: 4px;
    flex-direction: column;
}
#rg-selected-controls{
    width: 100%;
    display: grid;
    grid-template-columns: auto 32px;
    grid-template-rows: 32px;
    flex-grow: 2;
    gap: 4px;
    justify-self: flex-start;
    margin-top: 3px;
}
#rg-group-controls{
    margin-bottom: 2px;
    width: 100%;
    display: grid;
    grid-template-columns: auto 24px 24px 24px;
    grid-template-rows: 24px;
    gap: 2px;
    justify-self: flex-end;
}
#rg-list{
    border: 1px solid black;
    border-radius: 4px;
    background: lightgreen;
    height: 24px;
    font-size: small;
  
}
#rg-selected-name {
    background: rgb(73, 158, 0);
    border-radius: 4px;
    font-size: 1.2em;
    font-weight: bold;
    text-align: center;
    display: flex;
    place-content: center;
    flex-direction: column; 
    width: 100%;
    overflow: hidden;
}
.btn-rg{
    border: 1px solid black;
    background: whitesmoke;
    border-radius: 4px;
    font-size: 1.5em;
    display: flex;
    margin: 0px;
    padding: 0px;
    place-content: center;
    flex-direction: column;
    align-items: center;
}

.btn-rg-list{
    border: 1px solid black;
    background: whitesmoke;
    border-radius: 4px;
    font-size: 1.5em;
    display: flex;
    flex-direction: column;
    place-content: center;
    margin: 0px;
    padding: 0px;
    align-items: center;

}

.btn-rg:active{
    background: lightgray;
}

/* Settings */

#settings-container{
    margin-top: 0.5em;
    margin-left: 0.5em;
    margin-right: 0.5em;
    display: flex;
    flex-direction: column;
}
#settings-controls{
    height: 32px;
    display: flex;
    flex-direction: row;
}
#template-text{
    font-size: small;
    resize: none;
    flex-grow: 2;
    border: 1px solid darkgray;
    border-radius: 4px;
    padding: 0.4em;
}

#btn-settings{
    width: 32px;
    height: 32px;
    font-size: 2em;
    color: white;
    background: rgb(73, 158, 0);
    border:none;
    border-radius: 4px;
    padding: 0px;
    margin: 0px;
    place-content: center;
    display: flex;
    flex-direction: vertical;
}

#btn-settings:active{
    background: rgb(93, 178, 0);
}
#settings-controls > select {
    flex-grow: 2;
    border: 1px solid gray;
    border-radius: 4px;
    background: whitesmoke;
    appearance: none;
    overflow: hidden;
    width: 100%;
    margin-top: 2px;
    margin-bottom: 2px;
}
.settings-btn{
    width: 72px;
    padding: 0px;
    background: whitesmoke;
    border: 1px solid gray;
    border-radius: 4px;
    margin-left: 2px;
    margin-top: 2px;
    margin-bottom: 2px;
    font-size: smaller;
}

.settings-btn:active{
    background: darkgray;
}
</style></head>

<body>
    <div id="content">
        <div id="main-controls">
            <button title="Template Settings" id="btn-settings">&#x2699;</button>
            <div class="rg-info">
                <div id="rg-selected-controls">
                    <span id="rg-selected-name"></span>
                    <button title="Change Name" class="btn-rg" id="btn-change-name">&#x1F589;</button>
                </div>
                <div id="rg-group-controls" >
                <select name="rg-list" id="rg-list"></select>
                    <button title="Download current group" class="btn-rg-list" id="btn-rg-download">&#x21E9;</button>
                    <button title="Create new group" class="btn-rg-list" id="btn-rg-new">&plus;</button>
                    <button title="Delete current group" class="btn-rg-list" id="btn-rg-del">&minus;</button>
                </div>
            </div>
        </div>
        <div id="stats-header"> <span id="title-text">Task Tracking helper </span></div>
        <div id="entry">
            <div id="settings-container"></div>
            <div class="input-fields-container" id="in-fields">
            </div>
            <div id="tasks-info">

            </div>
            <div id="comments" class="comments-container">
                <textarea name="comments-box" id="comments-text" placeholder="Comments"></textarea>
            </div>
            <div id="current-record-controls" class="record-controls">
                <button class="control-btn" id="btn-copy-current">Copy</button>
                <button class="control-btn" id="btn-track-current">Completed</button>
            </div>
        </div>
        <div id="log"></div>
    </div>
<script type="text/javascript">/*! For license information please see tth.js.LICENSE.txt */
!function(I){var g={};function C(e){if(g[e])return g[e].exports;var t=g[e]={i:e,l:!1,exports:{}};return I[e].call(t.exports,t,t.exports,C),t.l=!0,t.exports}C.m=I,C.c=g,C.d=function(I,g,e){C.o(I,g)||Object.defineProperty(I,g,{enumerable:!0,get:e})},C.r=function(I){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(I,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(I,"__esModule",{value:!0})},C.t=function(I,g){if(1&g&&(I=C(I)),8&g)return I;if(4&g&&"object"==typeof I&&I&&I.__esModule)return I;var e=Object.create(null);if(C.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:I}),2&g&&"string"!=typeof I)for(var t in I)C.d(e,t,function(g){return I[g]}.bind(null,t));return e},C.n=function(I){var g=I&&I.__esModule?function(){return I.default}:function(){return I};return C.d(g,"a",g),g},C.o=function(I,g){return Object.prototype.hasOwnProperty.call(I,g)},C.p="",C(C.s="./src/index.js")}({"./src/html-views.js":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return HTMLViews; });\n/* harmony import */ var _task_record_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./task-record.js */ "./src/task-record.js");\n// HTMLView\n// displays and retrieves info to and from the DOM \n\n//import {hash, copyToClipboard, copyInputToClipboard} from \'./trh.js\'\nclass HTMLViews {\n    constructor(tasksTrackingHelper){\n        this._tasksTrackingHelper = tasksTrackingHelper;\n        this._logCount = 0;\n        this._displayingSettings = false;\n        this.loadTemplateView();\n        this.showCurrentGroup();\n        this.updateRecordsGroupInfoView();\n        this.domParser = new DOMParser();\n\n        document.addEventListener(\n            \'DOMContentLoaded\',\n            (() => {\n                this.updateEventHandlers();\n            }).bind(this)\n        );\n        \n    }\n    get logCount () {return this._logCount;}\n    set logCount (value) {this._logCount = value;}\n    get tasksTrackingHelper () {\n        return this._tasksTrackingHelper;\n    }\n\n    updateEventHandlers(){\n        // Clicks\n        let handlerList = [\n            ["click", "#current-record-controls", this.handleCurrentRecordActions],\n            ["click", "#log", this.handleLogActions],\n            ["click", "#btn-settings", this.toggleSettingsView],\n            ["click", "#btn-change-name", this.triggerRenameCurrentRecordsGroup],\n            ["click", "#btn-rg-new", this.triggerNewRecordsGroup],\n            ["click", "#btn-rg-del", this.triggerDeleteCurrentRecordsGroup],\n            ["click", "#btn-rg-download", this.triggerDownloadRecordsGroup],\n            ["click", "#settings-container", this.handleSettingsActions],\n            ["click", "#in-fields", this.handleInputActions],\n            ["click", "#tasks-info", this.handleTaskOutcomeChange],\n            ["change", "#rg-list", this.triggerChangeSelectedRececordsGroup],\n            ["change", "#entry", this.updateUnsavedRecord]\n        ]\n        handlerList.forEach(handlerDesc => { this.simpleAction( ...handlerDesc) }, this);\n    }\n    handleInputActions(event){\n        let id = event.target.id;\n        let arr = id.split("-");\n        if(arr[0] == "copy_input") {\n            this.copyToClipboard(document.getElementById(arr[1]).value);\n        }\n\n    }\n\n    simpleAction(action, selector, fn){\n        let element = document.querySelector(selector);\n        element.addEventListener(\n            action,\n            (() => { \n                let o = this;\n                o[fn.name](event);\n            }).bind(this)\n        );\n    }\n    handleTaskOutcomeChange(event){\n        if (event.target.tagName == \'INPUT\') {\n            if (event.target.id.match(/\\d+-\\d+/).length > 0) {\n                this.setOutcome(event.target.id);\n            }\n        }\n\n    }\n\n    copyRecord(id){\n        console.log("trying to copy " + id);\n        this.copyToClipboard(\n            this._tasksTrackingHelper\n                ._selectedRecordsGroup.getRecord(id).summary\n        )\n\n    }\n    handleLogActions(event){\n        let elementID = event.target.id ;\n        let arr       = elementID.split("-");\n        let fnList    = new Map();\n\n        fnList.set("dr",this.deleteRecordAndView);\n        fnList.set("chk",this.markRecordTrackedStatus);\n        fnList.set("copy", this.copyRecord);\n        let f = fnList.get(arr[0]);\n        if (f){\n            let h = this;\n            h[f.name](arr[1]);\n        }\n    }\n    markRecordTrackedStatus(id){\n        let status = document.getElementById("chk-"+id).checked;\n        this._tasksTrackingHelper._selectedRecordsGroup.setTrackedStatus(id, status);\n        this._tasksTrackingHelper.storeSelectedRecordsGroup();\n        this.updateRecordBackground(id);\n    }\n\n    updateRecordBackground(id){\n        let status = document.getElementById("chk-"+id).checked;\n        let record = document.getElementById(id);\n        if (status == true){\n            record.classList.remove("record-untracked");\n            record.classList.add("record-tracked");\n        } else {\n            record.classList.remove("record-tracked");\n            record.classList.add("record-untracked");\n        }\n\n    }\n\n    deleteRecordAndView(id){\n        console.log("dr: "+id)\n        let text = document.getElementById(id).innerText;\n        let ok   = confirm(\n            "Are you sure you want to delete:\\n" + \n            "================================\\n" + text\n            );\n        if(ok){\n            this._tasksTrackingHelper._selectedRecordsGroup.deleteRecord(id);\n            this._tasksTrackingHelper.storeSelectedRecordsGroup();\n            //this.showCurrentGroup();\n            let lc = document.getElementById("log");\n            let rc = document.getElementById("rc-"+id);\n            lc.removeChild(rc);\n            let recordsCount = \n                this._tasksTrackingHelper.\n                    _selectedRecordsGroup.records.length; \n            let cLabels = document.querySelectorAll(".record-container > div.record-header > h3");\n            if (cLabels){\n                let l = cLabels.length;\n                for (let index = 0 ; index < l; index++) {\n                    cLabels[index].innerText = l - index;\n                }\n                this._logCount = l ;\n            }\n            \n\n        }\n    }\n\n    handleSettingsActions (event) {\n        let tid = event.target.id;\n        switch (tid) {\n            case "template-save":\n                this.saveTemplateChanges();\n                break;\n            case "template-new":\n                this.createNewRecordsTemplate();\n                break;\n            case "template-delete":\n                this.deleteSelectedRecordsTemplateAndView();\n                break;\n            default:\n                break;\n        }\n\n    }\n\n    createNewRecordsTemplate(){\n        this._tasksTrackingHelper.addTemplate(\n            this.tasksTrackingHelper.generateDefaultTemplateText()\n        );\n        this.refreshSettingsViews();\n        this.loadTemplateView();\n    }\n    refreshSettingsViews(){\n        document.getElementById("template-text").value =\n            this._tasksTrackingHelper.selectedRecordsTemplate.templateText;\n        \n        this.loadTemplatesSelect();\n        document.getElementById("templates-select").value =\n            this._tasksTrackingHelper.selectedRecordsTemplate.name;\n\n    }\n    deleteSelectedRecordsTemplateAndView(){\n        let tn = this._tasksTrackingHelper.selectedRecordsTemplate.name;\n        let ok = confirm(`Are you sure you want to delete the template ${tn}?`)\n        if (ok){\n            this._tasksTrackingHelper.deleteSelectedRecordsTemplate();\n            this.loadTemplateView();\n            this.refreshSettingsViews();\n        }\n    }\n    loadTemplateView(){\n        this.createInputFields();\n        this.createTaskViews();\n        this.showUnsavedRecord();\n    }\n    \n    saveTemplateChanges() {\n        let tt = document.getElementById("template-text").value;\n        this._tasksTrackingHelper.changeCurrentRecordsTemplate(tt);\n        this.loadTemplatesSelect();\n        this.loadTemplateView();\n    }\n\n\n    updateTemplatesSelect(templateName){\n        let tth = this._tasksTrackingHelper;\n        tth.selectedRecordsTemplate = templateName;\n        let t   = tth.selectedRecordsTemplate;\n        document.getElementById("template-text").value = t.templateText;\n        tth._selectedRecordsGroup._type = t.name;\n        tth.storeSelectedRecordsGroup();\n        this.loadTemplateView();\n    }\n\n    // Records Group Section\n    updateRecordsGroupInfoView(){\n        this.updateRecordsGroupList();\n        this.updateSelectedGroupInfo();\n\n    }\n    updateRecordsGroupList(){\n        let rgl = document.getElementById("rg-list");\n        let options = this._tasksTrackingHelper._recordsGroupList\n            .map( n => `<option value="${n}">${n}</option>` );\n        let html = options.join("")\n        rgl.innerHTML = "";\n        rgl.innerHTML = html;\n    }\n    updateSelectedGroupInfo(){\n        let rgn = document.getElementById("rg-selected-name");\n        let n   = this._tasksTrackingHelper._selectedRecordsGroup.name;\n        rgn.innerText = n;\n        let rgl = document.getElementById("rg-list");\n        rgl.value = n;\n    }\n    triggerRenameCurrentRecordsGroup(){\n        let rg = this._tasksTrackingHelper._selectedRecordsGroup;\n        let rgNameDisplay = document.getElementById("rg-selected-name");\n        let changeNameBtn = document.getElementById("btn-change-name");\n        if (!rgNameDisplay.isContentEditable){\n            rgNameDisplay.contentEditable = true;\n            rgNameDisplay.focus();\n            changeNameBtn.innerHTML="&#x1f4be;"; // utf8 floppy disk\n        } else {\n            changeNameBtn.innerHTML="&#x1f589;"; // utf8 LOWER LEFT PENCIL\n            rgNameDisplay.contentEditable = false;\n            let newName = rgNameDisplay.innerText;\n            let oldName = rg.name;\n            if (newName != oldName) {\n                this._tasksTrackingHelper.renameCurrentRecordsGroup(newName);\n                this.updateRecordsGroupList();\n                this.updateSelectedGroupInfo();\n            }\n        }\n    }\n    triggerDownloadRecordsGroup(){\n        let rg = this._tasksTrackingHelper._selectedRecordsGroup;\n        let blob =  rg.toBlob();\n        let  objURL = window.URL.createObjectURL(blob);\n        let element = document.createElement("a");\n        element.href = objURL;\n        element.download = `${rg.name} ${rg.date}`\n        document.body.appendChild(element);\n        element.click();\n        document.body.removeChild(element);\n    }\n\n    triggerNewRecordsGroup(){\n        let name = "RG "+ new Date().toISOString().slice(0,19);\n        this._tasksTrackingHelper.setupNewRecordsGroup( name, \'Default\');\n        this.updateRecordsGroupList();\n        this.updateSelectedGroupInfo();\n        this.showCurrentGroup()\n    }\n\n    triggerDeleteCurrentRecordsGroup(){\n        let ok = confirm("Are you sure you want to delete the Records Group:\\n"\n            + this._tasksTrackingHelper._selectedRecordsGroup.name);\n        if (ok) {\n            this._tasksTrackingHelper.deleteCurrentRecordsGroup();\n            this.updateRecordsGroupList();\n            this.updateSelectedGroupInfo();\n            this.showCurrentGroup();\n            this.loadTemplateView();\n            if(this._displayingSettings) {\n                this.refreshSettingsViews();\n            }\n        }\n    \n    }\n\n    triggerChangeSelectedRececordsGroup(event){\n        let allDaltaSaved = this.isCurrentFormEmpty();\n        let ok = true;\n        if (!allDaltaSaved) {\n            ok = confirm("There is unsaved data, continue?");\n        }\n        if (ok) {\n            let sg = event.target.value;\n            this._tasksTrackingHelper.changeSelectedRecordsGroup(sg);\n            this.updateRecordsGroupList();\n            this.updateSelectedGroupInfo();\n            this.showCurrentGroup()\n            this.loadTemplateView();\n            let sc = document.getElementById("settings-container");\n            if(sc.hasChildNodes()) {\n                this.refreshSettingsViews();\n            }\n        }\n\n    }\n\n    createInputFields() {\n        this.tasksTrackingHelper.selectedRecordsTemplate.updateInputIDs().then((ids) => {\n            let inputFieldNames = this.tasksTrackingHelper.selectedRecordsTemplate.inputFieldNames;\n            let fieldsContainer = document.getElementById("in-fields");\n            fieldsContainer.innerHTML = "";\n            //let ids = this.tasksTrackingHelper.selectedRecordsTemplate.inputFieldIDs;\n            inputFieldNames.forEach((n, index) => {\n                fieldsContainer.innerHTML +=\n                    `<div class="input-field-container">\n                        <label for="${ids[index]}" class="input-field-label">${n}</label>\n                        <input class=\'input-field\' id="${ids[index]}" type="text">\n                    </div>\n                    <button tabindex="-1" id="copy_input-${ids[index]}" class=\'copy\' >&#x2398</button>`\n            });\n        }) ;\n    }\n\n    createTaskViews(){\n        let tasks = this._tasksTrackingHelper.selectedRecordsTemplate.tasks;\n        const infoDiv = document.getElementById("tasks-info");\n        infoDiv.innerHTML = "";\n        tasks.forEach(\n            (task, index) => {\n                let td = task.taskDescription;\n                infoDiv.innerHTML += `<div id=\'task-${index}\'  class=\'task\'>${td}</div>`;\n                infoDiv.innerHTML += `<div class="outcomes-container" id="oc-${index}"></div>`;\n                task.taskOutcomes.forEach(\n                    (taskOutcome, outcomeIndex) => {\n                        let taskOptionID = index + "-" + outcomeIndex;\n                        let html =\n                            `<input class=\'radio-option\' type="radio" \n                            id=${taskOptionID} name="tos-${index}" value=${taskOutcome}>\n                            <label class=\'to-unchecked\' for="${taskOptionID}">${taskOutcome}</label>`;\n                        let oc = document.getElementById(\'oc-\' + index);\n                        oc.innerHTML += html;\n                    });\n                \n            }\n        );\n        this.setDefaults();\n    }\n\n    toggleSettingsView(){\n        this._displayingSettings = (this._displayingSettings) ? false: true; //toggle\n        let settingsContainer = document.getElementById("settings-container");\n        if (this._displayingSettings){\n            let templateText = this._tasksTrackingHelper.selectedRecordsTemplate.templateText;\n            settingsContainer.style.height = "200px";\n            settingsContainer.innerHTML = `\n                    <textarea name="" id="template-text" ></textarea>\n                    <div id="settings-controls">\n                     <select name="templates-select" id="templates-select"></select>\n                     <button class="settings-btn" id="template-new">New</button>\n                     <button class="settings-btn" id="template-save">Save</button>\n                     <button class="settings-btn" id="template-delete">Delete</button>\n                    </div>\n                    `;\n            this.loadTemplatesSelect();\n            this.checkForElement(\'template-text\').then(tt => tt.value = templateText);\n            let selecthandler = (event) => {\n                console.log("fired!")\n                console.log(event.target.value);\n                this.updateTemplatesSelect(event.target.value);\n            }\n            selecthandler.bind(this);\n            this.checkForElement(\'templates-select\').then( templatesSelect =>\n                templatesSelect.onchange = selecthandler\n\n            );\n        } else {\n            settingsContainer.style.height = "0px";\n            settingsContainer.innerHTML = "";\n        }\n    }\n\n    loadTemplatesSelect(){\n        this.checkForElement("templates-select").then(\n            templatesSelect => {\n                let rtOptions = Array.from(this._tasksTrackingHelper._recordsTemplates)\n                    .map(rt => {\n                        let tn = rt[1].name;\n                        return `<option value="${tn}">${tn}</option>`;\n                    });\n                templatesSelect.innerHTML = rtOptions.join("");\n                templatesSelect.value = \n                    this._tasksTrackingHelper.selectedRecordsTemplate.name;\n\n            }\n        );\n    }\n\n    async animateGrow(element, size, duration){\n        let d = (duration/1000) * 60;\n        for (let index = 0; index < d; index++) {\n            requestAnimationFrame(() => {\n                let h =  size / d * index ;\n                element.style.height =  h + "px";\n            });\n            await new Promise(resolve => requestAnimationFrame(resolve));\n        }\n    }\n\n    setOutcome(toid) {\n        this._tasksTrackingHelper.updateSelectedTaskOutcome(...toid.split("-"));\n        let taskID = toid.split("-")[0];\n        let tasks = this._tasksTrackingHelper._selectedRecordsTemplate.tasks;\n        tasks[taskID].taskOutcomes.forEach((to, i) => {\n            toid = taskID + "-" + i;\n            let radioOption = document.getElementById(toid);\n            if (radioOption.checked) {\n                radioOption.labels[0].className = "to-checked";\n                document.getElementById("task-" + taskID).innerHTML = tasks[taskID].taskDescription + " " + to;\n            } else {\n                radioOption.labels[0].className = "to-unchecked";\n            }\n        });\n    }\n\n    setDefaults() {\n        console.log("Setting default outcomes");\n        let tasks = this._tasksTrackingHelper._selectedRecordsTemplate.tasks;\n        tasks.forEach((t, i) => {\n            var firstTaskOptionId = i + "-0";\n            document.getElementById(firstTaskOptionId).checked = true;\n            this.setOutcome(firstTaskOptionId);\n        });\n    }\n\n    getTaskInfo(taskID) {\n        return document.getElementById("task-" + taskID).innerText;\n    }\n    \n    getCurrentInfo() {\n        let ids = this._tasksTrackingHelper.selectedRecordsTemplate.inputFieldIDs;\n        let inputFieldNames = this._tasksTrackingHelper.selectedRecordsTemplate.inputFieldNames;\n        let tasks = this._tasksTrackingHelper.selectedRecordsTemplate.tasks;\n        let info = "";\n        ids.forEach(\n            (id, index) => {\n                var v = document.getElementById(id).value\n                info += `${inputFieldNames[index]}: ${v}\\n`\n            }\n        );\n        tasks.forEach((_, index) => {\n            info += this.getTaskInfo(index) + "\\n";\n        });\n        info += "Comments:\\n" + document.getElementById("comments-text").value + "\\n";\n        return info\n    }\n\n    isCurrentFormEmpty () {\n        let hasFilledFields = false;\n        let hasComments = (document.getElementById("comments-text").value > 0);\n        let ids = this._tasksTrackingHelper.selectedRecordsTemplate.inputFieldIDs;\n\n        for (var index = 0, n = ids.length; index < n; index++) {\n            var inField = document.getElementById(ids[index]);\n            if (inField.value.length > 0) {\n                hasFilledFields = true;\n                break;\n            }\n        }\n        return !hasFilledFields && !hasComments;\n    }\n\n    showUnsavedRecord(){\n        let tth = this._tasksTrackingHelper;\n        tth.loadUnsavedRecord();\n        let show = (ids) => {\n            let fieldsInfo = tth._unsavedRecord._fieldsInfo;\n            try {\n                ids.forEach((elementId, index) => {\n                    this.checkForElement(elementId).then(\n                        (element) => {\n                            element.value = fieldsInfo[index][1]\n                        }\n                    )\n                    \n                },this);\n            } catch (error) {\n                console.log(error)\n            }\n\n            try {\n                tth._taskOutcomesSelected.forEach(\n                    (outcomeIndex, taskIndex) => {\n                        let toid = taskIndex + "-" + outcomeIndex;\n                        let outcomeElement = document.getElementById(toid);\n                        outcomeElement.checked = true;\n                        this.setOutcome(toid);\n\n                    }\n                    , this);\n                \n            } catch (error) {\n                console.log(error)\n            }\n            try {\n                document.getElementById("comments-text").value = tth._unsavedRecord._comments;\n                \n            } catch (error) {\n                console.log(error)\n                \n            }\n\n        }\n        show.bind(this);\n\n        tth.selectedRecordsTemplate.updateInputIDs().then(show);\n        \n    }\n\n    updateUnsavedRecord(event){\n        let target = event.target\n        let parent = event.target.parentNode;\n        let tth = this.tasksTrackingHelper;\n        switch (parent.className) {\n            case "input-field-container":\n                let index = tth._selectedRecordsTemplate\n                    ._inputFieldIDs.indexOf(target.id);\n                let value =  document.getElementById(target.id).value;\n                let fieldName = tth._selectedRecordsTemplate._inputFieldNames[index];\n                tth._unsavedRecord._fieldsInfo[index] = [fieldName,value];\n                break;\n\n            case "outcomes-container":\n                let arr = target.id.split("-");\n                tth.updateSelectedTaskOutcome(...arr);\n                break;\n\n            case "comments-container":\n                tth._unsavedRecord._comments = \n                    document.getElementById(target.id).value;\n                break;\n            default:\n                break;\n        }\n        tth.storeUnsavedRecord();\n        //let parent\n        //this._tasksTrackingHelper.storeUnsavedRecord();\n    }\n\n    handleCurrentRecordActions(event){\n        switch (event.target.id) {\n            case \'btn-copy-current\':\n                this.copyToClipboard(this.getCurrentInfo());\n                break;\n            case \'btn-track-current\':\n                this.trackCurrent();\n                break;\n            default:\n                break;\n        }\n\n    }\n\n    trackCurrent() {\n        console.log("Tracking")\n        let hasEmptyFields = false;\n        let ids = this._tasksTrackingHelper.selectedRecordsTemplate.inputFieldIDs;\n        let taskRecordsGroup = this._tasksTrackingHelper._selectedRecordsGroup;\n        let selectedTemplate = this._tasksTrackingHelper._selectedRecordsTemplate;\n\n        for (var index = 0, n = ids.length; index < n; index++) {\n            var inField = document.getElementById(ids[index]);\n            if (inField.value.length == 0) {\n                inField.focus();\n                hasEmptyFields = true;\n                break;\n            }\n        }\n\n        if (!hasEmptyFields) {\n            var info = this.getCurrentInfo();\n            // Create fields Array\n            let fieldsInfo = ids.map((id, index) => \n                [selectedTemplate.inputFieldNames[index], \n                document.getElementById(id).value]);\n\n            // Create tasks and Outcomes Array\n            let tasksAndOutcomes = this._tasksTrackingHelper._taskOutcomesSelected\n                .map(\n                    (outcomeIndex, taskIndex) => {\n                        let tasks = selectedTemplate.tasks;\n                        let desc = tasks[taskIndex].taskDescription\n                        let outcome = tasks[taskIndex].taskOutcomes[outcomeIndex]\n                        return [desc, outcome];\n                    }\n                );\n\n            let comments = document.getElementById("comments-text").value;\n            var tr = new _task_record_js__WEBPACK_IMPORTED_MODULE_0__["default"](fieldsInfo, tasksAndOutcomes, comments, "");\n            taskRecordsGroup.addRecord(tr);\n            this._tasksTrackingHelper.storeSelectedRecordsGroup();\n            tr.recalculateID().then(() => this.showInLog(tr));\n            this.clearFields();\n            this._tasksTrackingHelper.storeUnsavedRecord(); // After cleared\n        }\n    }\n\n    showInLog(taskRecord) {\n        let logDiv = document.getElementById("log");\n        this._logCount += 1;\n        let id = taskRecord.id;\n        let record =\n            `<div class=\'record-container\' id=\'rc-${id}\'>\n                    <button class=\'copy\' id=\'copy-${id}\'>&#x2398;</button>\n                    <div class=\'record-header\'> \n                        <h3 class=\'count\'>${this.logCount}</h3> \n                        <label for=\'chk-${id}\' class=\'small-label\'>Tracked</label> \n                        <input id=\'chk-${id}\' type=\'checkbox\'/>\n                        <button class=\'delete-btn\' id=\'dr-${id}\'>&#x1F5D1;</button>\n                    </div>\n                    <div id=\'${id}\' class=\'record\'>${taskRecord.getInfo()}</div> \n            </div>`;\n        let element =  this.domParser.parseFromString(record.toString(), \'text/html\');\n        logDiv.prepend(element.body.firstChild);\n        let status = taskRecord.tracked;\n        this.checkForElement(\'chk-\'+id).then(el => el.checked = status);\n        this.checkForElement(id).then(el => this.updateRecordBackground(el.id));\n        \n    }\n\n    showCurrentGroup() {\n        let logDiv = document.getElementById("log").innerHTML = "";\n        let taskRecords = this._tasksTrackingHelper._selectedRecordsGroup.records;\n        this._logCount = 0;\n        for (let index = 0; index < taskRecords.length; index++) {\n            const tr = taskRecords[index];\n            tr.recalculateID().then( (() =>  this.showInLog(tr)).bind(this));\n        }\n    }\n\n    clearFields() {\n        let ids = this._tasksTrackingHelper.selectedRecordsTemplate.inputFieldIDs;\n        ids.forEach(id => document.getElementById(id).value = "");\n        this.setDefaults();\n        this._tasksTrackingHelper.resetUnsavedRecord();\n        document.getElementById("comments-text").value = "";\n    }\n    // Copy current info to clipboard\n    // copyInfo\n    copyToClipboard(text) {\n        navigator.clipboard.writeText(text).then(function () {\n            /* clipboard successfully set */\n            console.log("Text copied");\n        }, function () {\n            /* clipboard write failed */\n            console.log("Text not copied");\n        });\n\n    }\n    async checkForElement(id) {\n        let el = null;\n        do {\n            await new Promise(resolve => requestAnimationFrame(resolve));\n            el = document.getElementById(id);\n        } while (el === null);\n        return el;\n    }\n\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvaHRtbC12aWV3cy5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9odG1sLXZpZXdzLmpzPzkwNzciXSwic291cmNlc0NvbnRlbnQiOlsiLy8gSFRNTFZpZXdcbi8vIGRpc3BsYXlzIGFuZCByZXRyaWV2ZXMgaW5mbyB0byBhbmQgZnJvbSB0aGUgRE9NIFxuaW1wb3J0IFRhc2tSZWNvcmQgZnJvbSAnLi90YXNrLXJlY29yZC5qcyc7XG4vL2ltcG9ydCB7aGFzaCwgY29weVRvQ2xpcGJvYXJkLCBjb3B5SW5wdXRUb0NsaXBib2FyZH0gZnJvbSAnLi90cmguanMnXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBIVE1MVmlld3Mge1xuICAgIGNvbnN0cnVjdG9yKHRhc2tzVHJhY2tpbmdIZWxwZXIpe1xuICAgICAgICB0aGlzLl90YXNrc1RyYWNraW5nSGVscGVyID0gdGFza3NUcmFja2luZ0hlbHBlcjtcbiAgICAgICAgdGhpcy5fbG9nQ291bnQgPSAwO1xuICAgICAgICB0aGlzLl9kaXNwbGF5aW5nU2V0dGluZ3MgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5sb2FkVGVtcGxhdGVWaWV3KCk7XG4gICAgICAgIHRoaXMuc2hvd0N1cnJlbnRHcm91cCgpO1xuICAgICAgICB0aGlzLnVwZGF0ZVJlY29yZHNHcm91cEluZm9WaWV3KCk7XG4gICAgICAgIHRoaXMuZG9tUGFyc2VyID0gbmV3IERPTVBhcnNlcigpO1xuXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAgICAgICAnRE9NQ29udGVudExvYWRlZCcsXG4gICAgICAgICAgICAoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlRXZlbnRIYW5kbGVycygpO1xuICAgICAgICAgICAgfSkuYmluZCh0aGlzKVxuICAgICAgICApO1xuICAgICAgICBcbiAgICB9XG4gICAgZ2V0IGxvZ0NvdW50ICgpIHtyZXR1cm4gdGhpcy5fbG9nQ291bnQ7fVxuICAgIHNldCBsb2dDb3VudCAodmFsdWUpIHt0aGlzLl9sb2dDb3VudCA9IHZhbHVlO31cbiAgICBnZXQgdGFza3NUcmFja2luZ0hlbHBlciAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl90YXNrc1RyYWNraW5nSGVscGVyO1xuICAgIH1cblxuICAgIHVwZGF0ZUV2ZW50SGFuZGxlcnMoKXtcbiAgICAgICAgLy8gQ2xpY2tzXG4gICAgICAgIGxldCBoYW5kbGVyTGlzdCA9IFtcbiAgICAgICAgICAgIFtcImNsaWNrXCIsIFwiI2N1cnJlbnQtcmVjb3JkLWNvbnRyb2xzXCIsIHRoaXMuaGFuZGxlQ3VycmVudFJlY29yZEFjdGlvbnNdLFxuICAgICAgICAgICAgW1wiY2xpY2tcIiwgXCIjbG9nXCIsIHRoaXMuaGFuZGxlTG9nQWN0aW9uc10sXG4gICAgICAgICAgICBbXCJjbGlja1wiLCBcIiNidG4tc2V0dGluZ3NcIiwgdGhpcy50b2dnbGVTZXR0aW5nc1ZpZXddLFxuICAgICAgICAgICAgW1wiY2xpY2tcIiwgXCIjYnRuLWNoYW5nZS1uYW1lXCIsIHRoaXMudHJpZ2dlclJlbmFtZUN1cnJlbnRSZWNvcmRzR3JvdXBdLFxuICAgICAgICAgICAgW1wiY2xpY2tcIiwgXCIjYnRuLXJnLW5ld1wiLCB0aGlzLnRyaWdnZXJOZXdSZWNvcmRzR3JvdXBdLFxuICAgICAgICAgICAgW1wiY2xpY2tcIiwgXCIjYnRuLXJnLWRlbFwiLCB0aGlzLnRyaWdnZXJEZWxldGVDdXJyZW50UmVjb3Jkc0dyb3VwXSxcbiAgICAgICAgICAgIFtcImNsaWNrXCIsIFwiI2J0bi1yZy1kb3dubG9hZFwiLCB0aGlzLnRyaWdnZXJEb3dubG9hZFJlY29yZHNHcm91cF0sXG4gICAgICAgICAgICBbXCJjbGlja1wiLCBcIiNzZXR0aW5ncy1jb250YWluZXJcIiwgdGhpcy5oYW5kbGVTZXR0aW5nc0FjdGlvbnNdLFxuICAgICAgICAgICAgW1wiY2xpY2tcIiwgXCIjaW4tZmllbGRzXCIsIHRoaXMuaGFuZGxlSW5wdXRBY3Rpb25zXSxcbiAgICAgICAgICAgIFtcImNsaWNrXCIsIFwiI3Rhc2tzLWluZm9cIiwgdGhpcy5oYW5kbGVUYXNrT3V0Y29tZUNoYW5nZV0sXG4gICAgICAgICAgICBbXCJjaGFuZ2VcIiwgXCIjcmctbGlzdFwiLCB0aGlzLnRyaWdnZXJDaGFuZ2VTZWxlY3RlZFJlY2Vjb3Jkc0dyb3VwXSxcbiAgICAgICAgICAgIFtcImNoYW5nZVwiLCBcIiNlbnRyeVwiLCB0aGlzLnVwZGF0ZVVuc2F2ZWRSZWNvcmRdXG4gICAgICAgIF1cbiAgICAgICAgaGFuZGxlckxpc3QuZm9yRWFjaChoYW5kbGVyRGVzYyA9PiB7IHRoaXMuc2ltcGxlQWN0aW9uKCAuLi5oYW5kbGVyRGVzYykgfSwgdGhpcyk7XG4gICAgfVxuICAgIGhhbmRsZUlucHV0QWN0aW9ucyhldmVudCl7XG4gICAgICAgIGxldCBpZCA9IGV2ZW50LnRhcmdldC5pZDtcbiAgICAgICAgbGV0IGFyciA9IGlkLnNwbGl0KFwiLVwiKTtcbiAgICAgICAgaWYoYXJyWzBdID09IFwiY29weV9pbnB1dFwiKSB7XG4gICAgICAgICAgICB0aGlzLmNvcHlUb0NsaXBib2FyZChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChhcnJbMV0pLnZhbHVlKTtcbiAgICAgICAgfVxuXG4gICAgfVxuXG4gICAgc2ltcGxlQWN0aW9uKGFjdGlvbiwgc2VsZWN0b3IsIGZuKXtcbiAgICAgICAgbGV0IGVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcbiAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICAgICAgYWN0aW9uLFxuICAgICAgICAgICAgKCgpID0+IHsgXG4gICAgICAgICAgICAgICAgbGV0IG8gPSB0aGlzO1xuICAgICAgICAgICAgICAgIG9bZm4ubmFtZV0oZXZlbnQpO1xuICAgICAgICAgICAgfSkuYmluZCh0aGlzKVxuICAgICAgICApO1xuICAgIH1cbiAgICBoYW5kbGVUYXNrT3V0Y29tZUNoYW5nZShldmVudCl7XG4gICAgICAgIGlmIChldmVudC50YXJnZXQudGFnTmFtZSA9PSAnSU5QVVQnKSB7XG4gICAgICAgICAgICBpZiAoZXZlbnQudGFyZ2V0LmlkLm1hdGNoKC9cXGQrLVxcZCsvKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRPdXRjb21lKGV2ZW50LnRhcmdldC5pZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgIH1cblxuICAgIGNvcHlSZWNvcmQoaWQpe1xuICAgICAgICBjb25zb2xlLmxvZyhcInRyeWluZyB0byBjb3B5IFwiICsgaWQpO1xuICAgICAgICB0aGlzLmNvcHlUb0NsaXBib2FyZChcbiAgICAgICAgICAgIHRoaXMuX3Rhc2tzVHJhY2tpbmdIZWxwZXJcbiAgICAgICAgICAgICAgICAuX3NlbGVjdGVkUmVjb3Jkc0dyb3VwLmdldFJlY29yZChpZCkuc3VtbWFyeVxuICAgICAgICApXG5cbiAgICB9XG4gICAgaGFuZGxlTG9nQWN0aW9ucyhldmVudCl7XG4gICAgICAgIGxldCBlbGVtZW50SUQgPSBldmVudC50YXJnZXQuaWQgO1xuICAgICAgICBsZXQgYXJyICAgICAgID0gZWxlbWVudElELnNwbGl0KFwiLVwiKTtcbiAgICAgICAgbGV0IGZuTGlzdCAgICA9IG5ldyBNYXAoKTtcblxuICAgICAgICBmbkxpc3Quc2V0KFwiZHJcIix0aGlzLmRlbGV0ZVJlY29yZEFuZFZpZXcpO1xuICAgICAgICBmbkxpc3Quc2V0KFwiY2hrXCIsdGhpcy5tYXJrUmVjb3JkVHJhY2tlZFN0YXR1cyk7XG4gICAgICAgIGZuTGlzdC5zZXQoXCJjb3B5XCIsIHRoaXMuY29weVJlY29yZCk7XG4gICAgICAgIGxldCBmID0gZm5MaXN0LmdldChhcnJbMF0pO1xuICAgICAgICBpZiAoZil7XG4gICAgICAgICAgICBsZXQgaCA9IHRoaXM7XG4gICAgICAgICAgICBoW2YubmFtZV0oYXJyWzFdKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBtYXJrUmVjb3JkVHJhY2tlZFN0YXR1cyhpZCl7XG4gICAgICAgIGxldCBzdGF0dXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNoay1cIitpZCkuY2hlY2tlZDtcbiAgICAgICAgdGhpcy5fdGFza3NUcmFja2luZ0hlbHBlci5fc2VsZWN0ZWRSZWNvcmRzR3JvdXAuc2V0VHJhY2tlZFN0YXR1cyhpZCwgc3RhdHVzKTtcbiAgICAgICAgdGhpcy5fdGFza3NUcmFja2luZ0hlbHBlci5zdG9yZVNlbGVjdGVkUmVjb3Jkc0dyb3VwKCk7XG4gICAgICAgIHRoaXMudXBkYXRlUmVjb3JkQmFja2dyb3VuZChpZCk7XG4gICAgfVxuXG4gICAgdXBkYXRlUmVjb3JkQmFja2dyb3VuZChpZCl7XG4gICAgICAgIGxldCBzdGF0dXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNoay1cIitpZCkuY2hlY2tlZDtcbiAgICAgICAgbGV0IHJlY29yZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTtcbiAgICAgICAgaWYgKHN0YXR1cyA9PSB0cnVlKXtcbiAgICAgICAgICAgIHJlY29yZC5jbGFzc0xpc3QucmVtb3ZlKFwicmVjb3JkLXVudHJhY2tlZFwiKTtcbiAgICAgICAgICAgIHJlY29yZC5jbGFzc0xpc3QuYWRkKFwicmVjb3JkLXRyYWNrZWRcIik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZWNvcmQuY2xhc3NMaXN0LnJlbW92ZShcInJlY29yZC10cmFja2VkXCIpO1xuICAgICAgICAgICAgcmVjb3JkLmNsYXNzTGlzdC5hZGQoXCJyZWNvcmQtdW50cmFja2VkXCIpO1xuICAgICAgICB9XG5cbiAgICB9XG5cbiAgICBkZWxldGVSZWNvcmRBbmRWaWV3KGlkKXtcbiAgICAgICAgY29uc29sZS5sb2coXCJkcjogXCIraWQpXG4gICAgICAgIGxldCB0ZXh0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpLmlubmVyVGV4dDtcbiAgICAgICAgbGV0IG9rICAgPSBjb25maXJtKFxuICAgICAgICAgICAgXCJBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gZGVsZXRlOlxcblwiICsgXG4gICAgICAgICAgICBcIj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XFxuXCIgKyB0ZXh0XG4gICAgICAgICAgICApO1xuICAgICAgICBpZihvayl7XG4gICAgICAgICAgICB0aGlzLl90YXNrc1RyYWNraW5nSGVscGVyLl9zZWxlY3RlZFJlY29yZHNHcm91cC5kZWxldGVSZWNvcmQoaWQpO1xuICAgICAgICAgICAgdGhpcy5fdGFza3NUcmFja2luZ0hlbHBlci5zdG9yZVNlbGVjdGVkUmVjb3Jkc0dyb3VwKCk7XG4gICAgICAgICAgICAvL3RoaXMuc2hvd0N1cnJlbnRHcm91cCgpO1xuICAgICAgICAgICAgbGV0IGxjID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJsb2dcIik7XG4gICAgICAgICAgICBsZXQgcmMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInJjLVwiK2lkKTtcbiAgICAgICAgICAgIGxjLnJlbW92ZUNoaWxkKHJjKTtcbiAgICAgICAgICAgIGxldCByZWNvcmRzQ291bnQgPSBcbiAgICAgICAgICAgICAgICB0aGlzLl90YXNrc1RyYWNraW5nSGVscGVyLlxuICAgICAgICAgICAgICAgICAgICBfc2VsZWN0ZWRSZWNvcmRzR3JvdXAucmVjb3Jkcy5sZW5ndGg7IFxuICAgICAgICAgICAgbGV0IGNMYWJlbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnJlY29yZC1jb250YWluZXIgPiBkaXYucmVjb3JkLWhlYWRlciA+IGgzXCIpO1xuICAgICAgICAgICAgaWYgKGNMYWJlbHMpe1xuICAgICAgICAgICAgICAgIGxldCBsID0gY0xhYmVscy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwIDsgaW5kZXggPCBsOyBpbmRleCsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGNMYWJlbHNbaW5kZXhdLmlubmVyVGV4dCA9IGwgLSBpbmRleDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5fbG9nQ291bnQgPSBsIDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBoYW5kbGVTZXR0aW5nc0FjdGlvbnMgKGV2ZW50KSB7XG4gICAgICAgIGxldCB0aWQgPSBldmVudC50YXJnZXQuaWQ7XG4gICAgICAgIHN3aXRjaCAodGlkKSB7XG4gICAgICAgICAgICBjYXNlIFwidGVtcGxhdGUtc2F2ZVwiOlxuICAgICAgICAgICAgICAgIHRoaXMuc2F2ZVRlbXBsYXRlQ2hhbmdlcygpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcInRlbXBsYXRlLW5ld1wiOlxuICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlTmV3UmVjb3Jkc1RlbXBsYXRlKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwidGVtcGxhdGUtZGVsZXRlXCI6XG4gICAgICAgICAgICAgICAgdGhpcy5kZWxldGVTZWxlY3RlZFJlY29yZHNUZW1wbGF0ZUFuZFZpZXcoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgIH1cblxuICAgIGNyZWF0ZU5ld1JlY29yZHNUZW1wbGF0ZSgpe1xuICAgICAgICB0aGlzLl90YXNrc1RyYWNraW5nSGVscGVyLmFkZFRlbXBsYXRlKFxuICAgICAgICAgICAgdGhpcy50YXNrc1RyYWNraW5nSGVscGVyLmdlbmVyYXRlRGVmYXVsdFRlbXBsYXRlVGV4dCgpXG4gICAgICAgICk7XG4gICAgICAgIHRoaXMucmVmcmVzaFNldHRpbmdzVmlld3MoKTtcbiAgICAgICAgdGhpcy5sb2FkVGVtcGxhdGVWaWV3KCk7XG4gICAgfVxuICAgIHJlZnJlc2hTZXR0aW5nc1ZpZXdzKCl7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGVtcGxhdGUtdGV4dFwiKS52YWx1ZSA9XG4gICAgICAgICAgICB0aGlzLl90YXNrc1RyYWNraW5nSGVscGVyLnNlbGVjdGVkUmVjb3Jkc1RlbXBsYXRlLnRlbXBsYXRlVGV4dDtcbiAgICAgICAgXG4gICAgICAgIHRoaXMubG9hZFRlbXBsYXRlc1NlbGVjdCgpO1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRlbXBsYXRlcy1zZWxlY3RcIikudmFsdWUgPVxuICAgICAgICAgICAgdGhpcy5fdGFza3NUcmFja2luZ0hlbHBlci5zZWxlY3RlZFJlY29yZHNUZW1wbGF0ZS5uYW1lO1xuXG4gICAgfVxuICAgIGRlbGV0ZVNlbGVjdGVkUmVjb3Jkc1RlbXBsYXRlQW5kVmlldygpe1xuICAgICAgICBsZXQgdG4gPSB0aGlzLl90YXNrc1RyYWNraW5nSGVscGVyLnNlbGVjdGVkUmVjb3Jkc1RlbXBsYXRlLm5hbWU7XG4gICAgICAgIGxldCBvayA9IGNvbmZpcm0oYEFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUgdGhlIHRlbXBsYXRlICR7dG59P2ApXG4gICAgICAgIGlmIChvayl7XG4gICAgICAgICAgICB0aGlzLl90YXNrc1RyYWNraW5nSGVscGVyLmRlbGV0ZVNlbGVjdGVkUmVjb3Jkc1RlbXBsYXRlKCk7XG4gICAgICAgICAgICB0aGlzLmxvYWRUZW1wbGF0ZVZpZXcoKTtcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaFNldHRpbmdzVmlld3MoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBsb2FkVGVtcGxhdGVWaWV3KCl7XG4gICAgICAgIHRoaXMuY3JlYXRlSW5wdXRGaWVsZHMoKTtcbiAgICAgICAgdGhpcy5jcmVhdGVUYXNrVmlld3MoKTtcbiAgICAgICAgdGhpcy5zaG93VW5zYXZlZFJlY29yZCgpO1xuICAgIH1cbiAgICBcbiAgICBzYXZlVGVtcGxhdGVDaGFuZ2VzKCkge1xuICAgICAgICBsZXQgdHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRlbXBsYXRlLXRleHRcIikudmFsdWU7XG4gICAgICAgIHRoaXMuX3Rhc2tzVHJhY2tpbmdIZWxwZXIuY2hhbmdlQ3VycmVudFJlY29yZHNUZW1wbGF0ZSh0dCk7XG4gICAgICAgIHRoaXMubG9hZFRlbXBsYXRlc1NlbGVjdCgpO1xuICAgICAgICB0aGlzLmxvYWRUZW1wbGF0ZVZpZXcoKTtcbiAgICB9XG5cblxuICAgIHVwZGF0ZVRlbXBsYXRlc1NlbGVjdCh0ZW1wbGF0ZU5hbWUpe1xuICAgICAgICBsZXQgdHRoID0gdGhpcy5fdGFza3NUcmFja2luZ0hlbHBlcjtcbiAgICAgICAgdHRoLnNlbGVjdGVkUmVjb3Jkc1RlbXBsYXRlID0gdGVtcGxhdGVOYW1lO1xuICAgICAgICBsZXQgdCAgID0gdHRoLnNlbGVjdGVkUmVjb3Jkc1RlbXBsYXRlO1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRlbXBsYXRlLXRleHRcIikudmFsdWUgPSB0LnRlbXBsYXRlVGV4dDtcbiAgICAgICAgdHRoLl9zZWxlY3RlZFJlY29yZHNHcm91cC5fdHlwZSA9IHQubmFtZTtcbiAgICAgICAgdHRoLnN0b3JlU2VsZWN0ZWRSZWNvcmRzR3JvdXAoKTtcbiAgICAgICAgdGhpcy5sb2FkVGVtcGxhdGVWaWV3KCk7XG4gICAgfVxuXG4gICAgLy8gUmVjb3JkcyBHcm91cCBTZWN0aW9uXG4gICAgdXBkYXRlUmVjb3Jkc0dyb3VwSW5mb1ZpZXcoKXtcbiAgICAgICAgdGhpcy51cGRhdGVSZWNvcmRzR3JvdXBMaXN0KCk7XG4gICAgICAgIHRoaXMudXBkYXRlU2VsZWN0ZWRHcm91cEluZm8oKTtcblxuICAgIH1cbiAgICB1cGRhdGVSZWNvcmRzR3JvdXBMaXN0KCl7XG4gICAgICAgIGxldCByZ2wgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInJnLWxpc3RcIik7XG4gICAgICAgIGxldCBvcHRpb25zID0gdGhpcy5fdGFza3NUcmFja2luZ0hlbHBlci5fcmVjb3Jkc0dyb3VwTGlzdFxuICAgICAgICAgICAgLm1hcCggbiA9PiBgPG9wdGlvbiB2YWx1ZT1cIiR7bn1cIj4ke259PC9vcHRpb24+YCApO1xuICAgICAgICBsZXQgaHRtbCA9IG9wdGlvbnMuam9pbihcIlwiKVxuICAgICAgICByZ2wuaW5uZXJIVE1MID0gXCJcIjtcbiAgICAgICAgcmdsLmlubmVySFRNTCA9IGh0bWw7XG4gICAgfVxuICAgIHVwZGF0ZVNlbGVjdGVkR3JvdXBJbmZvKCl7XG4gICAgICAgIGxldCByZ24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInJnLXNlbGVjdGVkLW5hbWVcIik7XG4gICAgICAgIGxldCBuICAgPSB0aGlzLl90YXNrc1RyYWNraW5nSGVscGVyLl9zZWxlY3RlZFJlY29yZHNHcm91cC5uYW1lO1xuICAgICAgICByZ24uaW5uZXJUZXh0ID0gbjtcbiAgICAgICAgbGV0IHJnbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicmctbGlzdFwiKTtcbiAgICAgICAgcmdsLnZhbHVlID0gbjtcbiAgICB9XG4gICAgdHJpZ2dlclJlbmFtZUN1cnJlbnRSZWNvcmRzR3JvdXAoKXtcbiAgICAgICAgbGV0IHJnID0gdGhpcy5fdGFza3NUcmFja2luZ0hlbHBlci5fc2VsZWN0ZWRSZWNvcmRzR3JvdXA7XG4gICAgICAgIGxldCByZ05hbWVEaXNwbGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJyZy1zZWxlY3RlZC1uYW1lXCIpO1xuICAgICAgICBsZXQgY2hhbmdlTmFtZUJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYnRuLWNoYW5nZS1uYW1lXCIpO1xuICAgICAgICBpZiAoIXJnTmFtZURpc3BsYXkuaXNDb250ZW50RWRpdGFibGUpe1xuICAgICAgICAgICAgcmdOYW1lRGlzcGxheS5jb250ZW50RWRpdGFibGUgPSB0cnVlO1xuICAgICAgICAgICAgcmdOYW1lRGlzcGxheS5mb2N1cygpO1xuICAgICAgICAgICAgY2hhbmdlTmFtZUJ0bi5pbm5lckhUTUw9XCImI3gxZjRiZTtcIjsgLy8gdXRmOCBmbG9wcHkgZGlza1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2hhbmdlTmFtZUJ0bi5pbm5lckhUTUw9XCImI3gxZjU4OTtcIjsgLy8gdXRmOCBMT1dFUiBMRUZUIFBFTkNJTFxuICAgICAgICAgICAgcmdOYW1lRGlzcGxheS5jb250ZW50RWRpdGFibGUgPSBmYWxzZTtcbiAgICAgICAgICAgIGxldCBuZXdOYW1lID0gcmdOYW1lRGlzcGxheS5pbm5lclRleHQ7XG4gICAgICAgICAgICBsZXQgb2xkTmFtZSA9IHJnLm5hbWU7XG4gICAgICAgICAgICBpZiAobmV3TmFtZSAhPSBvbGROYW1lKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fdGFza3NUcmFja2luZ0hlbHBlci5yZW5hbWVDdXJyZW50UmVjb3Jkc0dyb3VwKG5ld05hbWUpO1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlUmVjb3Jkc0dyb3VwTGlzdCgpO1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlU2VsZWN0ZWRHcm91cEluZm8oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICB0cmlnZ2VyRG93bmxvYWRSZWNvcmRzR3JvdXAoKXtcbiAgICAgICAgbGV0IHJnID0gdGhpcy5fdGFza3NUcmFja2luZ0hlbHBlci5fc2VsZWN0ZWRSZWNvcmRzR3JvdXA7XG4gICAgICAgIGxldCBibG9iID0gIHJnLnRvQmxvYigpO1xuICAgICAgICBsZXQgIG9ialVSTCA9IHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xuICAgICAgICBsZXQgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpO1xuICAgICAgICBlbGVtZW50LmhyZWYgPSBvYmpVUkw7XG4gICAgICAgIGVsZW1lbnQuZG93bmxvYWQgPSBgJHtyZy5uYW1lfSAke3JnLmRhdGV9YFxuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGVsZW1lbnQpO1xuICAgICAgICBlbGVtZW50LmNsaWNrKCk7XG4gICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoZWxlbWVudCk7XG4gICAgfVxuXG4gICAgdHJpZ2dlck5ld1JlY29yZHNHcm91cCgpe1xuICAgICAgICBsZXQgbmFtZSA9IFwiUkcgXCIrIG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zbGljZSgwLDE5KTtcbiAgICAgICAgdGhpcy5fdGFza3NUcmFja2luZ0hlbHBlci5zZXR1cE5ld1JlY29yZHNHcm91cCggbmFtZSwgJ0RlZmF1bHQnKTtcbiAgICAgICAgdGhpcy51cGRhdGVSZWNvcmRzR3JvdXBMaXN0KCk7XG4gICAgICAgIHRoaXMudXBkYXRlU2VsZWN0ZWRHcm91cEluZm8oKTtcbiAgICAgICAgdGhpcy5zaG93Q3VycmVudEdyb3VwKClcbiAgICB9XG5cbiAgICB0cmlnZ2VyRGVsZXRlQ3VycmVudFJlY29yZHNHcm91cCgpe1xuICAgICAgICBsZXQgb2sgPSBjb25maXJtKFwiQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGRlbGV0ZSB0aGUgUmVjb3JkcyBHcm91cDpcXG5cIlxuICAgICAgICAgICAgKyB0aGlzLl90YXNrc1RyYWNraW5nSGVscGVyLl9zZWxlY3RlZFJlY29yZHNHcm91cC5uYW1lKTtcbiAgICAgICAgaWYgKG9rKSB7XG4gICAgICAgICAgICB0aGlzLl90YXNrc1RyYWNraW5nSGVscGVyLmRlbGV0ZUN1cnJlbnRSZWNvcmRzR3JvdXAoKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlUmVjb3Jkc0dyb3VwTGlzdCgpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVTZWxlY3RlZEdyb3VwSW5mbygpO1xuICAgICAgICAgICAgdGhpcy5zaG93Q3VycmVudEdyb3VwKCk7XG4gICAgICAgICAgICB0aGlzLmxvYWRUZW1wbGF0ZVZpZXcoKTtcbiAgICAgICAgICAgIGlmKHRoaXMuX2Rpc3BsYXlpbmdTZXR0aW5ncykge1xuICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaFNldHRpbmdzVmlld3MoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIFxuICAgIH1cblxuICAgIHRyaWdnZXJDaGFuZ2VTZWxlY3RlZFJlY2Vjb3Jkc0dyb3VwKGV2ZW50KXtcbiAgICAgICAgbGV0IGFsbERhbHRhU2F2ZWQgPSB0aGlzLmlzQ3VycmVudEZvcm1FbXB0eSgpO1xuICAgICAgICBsZXQgb2sgPSB0cnVlO1xuICAgICAgICBpZiAoIWFsbERhbHRhU2F2ZWQpIHtcbiAgICAgICAgICAgIG9rID0gY29uZmlybShcIlRoZXJlIGlzIHVuc2F2ZWQgZGF0YSwgY29udGludWU/XCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvaykge1xuICAgICAgICAgICAgbGV0IHNnID0gZXZlbnQudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgdGhpcy5fdGFza3NUcmFja2luZ0hlbHBlci5jaGFuZ2VTZWxlY3RlZFJlY29yZHNHcm91cChzZyk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVJlY29yZHNHcm91cExpc3QoKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlU2VsZWN0ZWRHcm91cEluZm8oKTtcbiAgICAgICAgICAgIHRoaXMuc2hvd0N1cnJlbnRHcm91cCgpXG4gICAgICAgICAgICB0aGlzLmxvYWRUZW1wbGF0ZVZpZXcoKTtcbiAgICAgICAgICAgIGxldCBzYyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2V0dGluZ3MtY29udGFpbmVyXCIpO1xuICAgICAgICAgICAgaWYoc2MuaGFzQ2hpbGROb2RlcygpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoU2V0dGluZ3NWaWV3cygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICB9XG5cbiAgICBjcmVhdGVJbnB1dEZpZWxkcygpIHtcbiAgICAgICAgdGhpcy50YXNrc1RyYWNraW5nSGVscGVyLnNlbGVjdGVkUmVjb3Jkc1RlbXBsYXRlLnVwZGF0ZUlucHV0SURzKCkudGhlbigoaWRzKSA9PiB7XG4gICAgICAgICAgICBsZXQgaW5wdXRGaWVsZE5hbWVzID0gdGhpcy50YXNrc1RyYWNraW5nSGVscGVyLnNlbGVjdGVkUmVjb3Jkc1RlbXBsYXRlLmlucHV0RmllbGROYW1lcztcbiAgICAgICAgICAgIGxldCBmaWVsZHNDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImluLWZpZWxkc1wiKTtcbiAgICAgICAgICAgIGZpZWxkc0NvbnRhaW5lci5pbm5lckhUTUwgPSBcIlwiO1xuICAgICAgICAgICAgLy9sZXQgaWRzID0gdGhpcy50YXNrc1RyYWNraW5nSGVscGVyLnNlbGVjdGVkUmVjb3Jkc1RlbXBsYXRlLmlucHV0RmllbGRJRHM7XG4gICAgICAgICAgICBpbnB1dEZpZWxkTmFtZXMuZm9yRWFjaCgobiwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICBmaWVsZHNDb250YWluZXIuaW5uZXJIVE1MICs9XG4gICAgICAgICAgICAgICAgICAgIGA8ZGl2IGNsYXNzPVwiaW5wdXQtZmllbGQtY29udGFpbmVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwiJHtpZHNbaW5kZXhdfVwiIGNsYXNzPVwiaW5wdXQtZmllbGQtbGFiZWxcIj4ke259PC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCBjbGFzcz0naW5wdXQtZmllbGQnIGlkPVwiJHtpZHNbaW5kZXhdfVwiIHR5cGU9XCJ0ZXh0XCI+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHRhYmluZGV4PVwiLTFcIiBpZD1cImNvcHlfaW5wdXQtJHtpZHNbaW5kZXhdfVwiIGNsYXNzPSdjb3B5JyA+JiN4MjM5ODwvYnV0dG9uPmBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KSA7XG4gICAgfVxuXG4gICAgY3JlYXRlVGFza1ZpZXdzKCl7XG4gICAgICAgIGxldCB0YXNrcyA9IHRoaXMuX3Rhc2tzVHJhY2tpbmdIZWxwZXIuc2VsZWN0ZWRSZWNvcmRzVGVtcGxhdGUudGFza3M7XG4gICAgICAgIGNvbnN0IGluZm9EaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRhc2tzLWluZm9cIik7XG4gICAgICAgIGluZm9EaXYuaW5uZXJIVE1MID0gXCJcIjtcbiAgICAgICAgdGFza3MuZm9yRWFjaChcbiAgICAgICAgICAgICh0YXNrLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgIGxldCB0ZCA9IHRhc2sudGFza0Rlc2NyaXB0aW9uO1xuICAgICAgICAgICAgICAgIGluZm9EaXYuaW5uZXJIVE1MICs9IGA8ZGl2IGlkPSd0YXNrLSR7aW5kZXh9JyAgY2xhc3M9J3Rhc2snPiR7dGR9PC9kaXY+YDtcbiAgICAgICAgICAgICAgICBpbmZvRGl2LmlubmVySFRNTCArPSBgPGRpdiBjbGFzcz1cIm91dGNvbWVzLWNvbnRhaW5lclwiIGlkPVwib2MtJHtpbmRleH1cIj48L2Rpdj5gO1xuICAgICAgICAgICAgICAgIHRhc2sudGFza091dGNvbWVzLmZvckVhY2goXG4gICAgICAgICAgICAgICAgICAgICh0YXNrT3V0Y29tZSwgb3V0Y29tZUluZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgdGFza09wdGlvbklEID0gaW5kZXggKyBcIi1cIiArIG91dGNvbWVJbmRleDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBodG1sID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgPGlucHV0IGNsYXNzPSdyYWRpby1vcHRpb24nIHR5cGU9XCJyYWRpb1wiIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSR7dGFza09wdGlvbklEfSBuYW1lPVwidG9zLSR7aW5kZXh9XCIgdmFsdWU9JHt0YXNrT3V0Y29tZX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSd0by11bmNoZWNrZWQnIGZvcj1cIiR7dGFza09wdGlvbklEfVwiPiR7dGFza091dGNvbWV9PC9sYWJlbD5gO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG9jID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ29jLScgKyBpbmRleCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBvYy5pbm5lckhUTUwgKz0gaHRtbDtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICAgIHRoaXMuc2V0RGVmYXVsdHMoKTtcbiAgICB9XG5cbiAgICB0b2dnbGVTZXR0aW5nc1ZpZXcoKXtcbiAgICAgICAgdGhpcy5fZGlzcGxheWluZ1NldHRpbmdzID0gKHRoaXMuX2Rpc3BsYXlpbmdTZXR0aW5ncykgPyBmYWxzZTogdHJ1ZTsgLy90b2dnbGVcbiAgICAgICAgbGV0IHNldHRpbmdzQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzZXR0aW5ncy1jb250YWluZXJcIik7XG4gICAgICAgIGlmICh0aGlzLl9kaXNwbGF5aW5nU2V0dGluZ3Mpe1xuICAgICAgICAgICAgbGV0IHRlbXBsYXRlVGV4dCA9IHRoaXMuX3Rhc2tzVHJhY2tpbmdIZWxwZXIuc2VsZWN0ZWRSZWNvcmRzVGVtcGxhdGUudGVtcGxhdGVUZXh0O1xuICAgICAgICAgICAgc2V0dGluZ3NDb250YWluZXIuc3R5bGUuaGVpZ2h0ID0gXCIyMDBweFwiO1xuICAgICAgICAgICAgc2V0dGluZ3NDb250YWluZXIuaW5uZXJIVE1MID0gYFxuICAgICAgICAgICAgICAgICAgICA8dGV4dGFyZWEgbmFtZT1cIlwiIGlkPVwidGVtcGxhdGUtdGV4dFwiID48L3RleHRhcmVhPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGlkPVwic2V0dGluZ3MtY29udHJvbHNcIj5cbiAgICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgbmFtZT1cInRlbXBsYXRlcy1zZWxlY3RcIiBpZD1cInRlbXBsYXRlcy1zZWxlY3RcIj48L3NlbGVjdD5cbiAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJzZXR0aW5ncy1idG5cIiBpZD1cInRlbXBsYXRlLW5ld1wiPk5ldzwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cInNldHRpbmdzLWJ0blwiIGlkPVwidGVtcGxhdGUtc2F2ZVwiPlNhdmU8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJzZXR0aW5ncy1idG5cIiBpZD1cInRlbXBsYXRlLWRlbGV0ZVwiPkRlbGV0ZTwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgYDtcbiAgICAgICAgICAgIHRoaXMubG9hZFRlbXBsYXRlc1NlbGVjdCgpO1xuICAgICAgICAgICAgdGhpcy5jaGVja0ZvckVsZW1lbnQoJ3RlbXBsYXRlLXRleHQnKS50aGVuKHR0ID0+IHR0LnZhbHVlID0gdGVtcGxhdGVUZXh0KTtcbiAgICAgICAgICAgIGxldCBzZWxlY3RoYW5kbGVyID0gKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJmaXJlZCFcIilcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhldmVudC50YXJnZXQudmFsdWUpO1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlVGVtcGxhdGVzU2VsZWN0KGV2ZW50LnRhcmdldC52YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzZWxlY3RoYW5kbGVyLmJpbmQodGhpcyk7XG4gICAgICAgICAgICB0aGlzLmNoZWNrRm9yRWxlbWVudCgndGVtcGxhdGVzLXNlbGVjdCcpLnRoZW4oIHRlbXBsYXRlc1NlbGVjdCA9PlxuICAgICAgICAgICAgICAgIHRlbXBsYXRlc1NlbGVjdC5vbmNoYW5nZSA9IHNlbGVjdGhhbmRsZXJcblxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNldHRpbmdzQ29udGFpbmVyLnN0eWxlLmhlaWdodCA9IFwiMHB4XCI7XG4gICAgICAgICAgICBzZXR0aW5nc0NvbnRhaW5lci5pbm5lckhUTUwgPSBcIlwiO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgbG9hZFRlbXBsYXRlc1NlbGVjdCgpe1xuICAgICAgICB0aGlzLmNoZWNrRm9yRWxlbWVudChcInRlbXBsYXRlcy1zZWxlY3RcIikudGhlbihcbiAgICAgICAgICAgIHRlbXBsYXRlc1NlbGVjdCA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IHJ0T3B0aW9ucyA9IEFycmF5LmZyb20odGhpcy5fdGFza3NUcmFja2luZ0hlbHBlci5fcmVjb3Jkc1RlbXBsYXRlcylcbiAgICAgICAgICAgICAgICAgICAgLm1hcChydCA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgdG4gPSBydFsxXS5uYW1lO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGA8b3B0aW9uIHZhbHVlPVwiJHt0bn1cIj4ke3RufTwvb3B0aW9uPmA7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlc1NlbGVjdC5pbm5lckhUTUwgPSBydE9wdGlvbnMuam9pbihcIlwiKTtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZXNTZWxlY3QudmFsdWUgPSBcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fdGFza3NUcmFja2luZ0hlbHBlci5zZWxlY3RlZFJlY29yZHNUZW1wbGF0ZS5uYW1lO1xuXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgYXN5bmMgYW5pbWF0ZUdyb3coZWxlbWVudCwgc2l6ZSwgZHVyYXRpb24pe1xuICAgICAgICBsZXQgZCA9IChkdXJhdGlvbi8xMDAwKSAqIDYwO1xuICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgZDsgaW5kZXgrKykge1xuICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgaCA9ICBzaXplIC8gZCAqIGluZGV4IDtcbiAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLmhlaWdodCA9ICBoICsgXCJweFwiO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHJlcXVlc3RBbmltYXRpb25GcmFtZShyZXNvbHZlKSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzZXRPdXRjb21lKHRvaWQpIHtcbiAgICAgICAgdGhpcy5fdGFza3NUcmFja2luZ0hlbHBlci51cGRhdGVTZWxlY3RlZFRhc2tPdXRjb21lKC4uLnRvaWQuc3BsaXQoXCItXCIpKTtcbiAgICAgICAgbGV0IHRhc2tJRCA9IHRvaWQuc3BsaXQoXCItXCIpWzBdO1xuICAgICAgICBsZXQgdGFza3MgPSB0aGlzLl90YXNrc1RyYWNraW5nSGVscGVyLl9zZWxlY3RlZFJlY29yZHNUZW1wbGF0ZS50YXNrcztcbiAgICAgICAgdGFza3NbdGFza0lEXS50YXNrT3V0Y29tZXMuZm9yRWFjaCgodG8sIGkpID0+IHtcbiAgICAgICAgICAgIHRvaWQgPSB0YXNrSUQgKyBcIi1cIiArIGk7XG4gICAgICAgICAgICBsZXQgcmFkaW9PcHRpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0b2lkKTtcbiAgICAgICAgICAgIGlmIChyYWRpb09wdGlvbi5jaGVja2VkKSB7XG4gICAgICAgICAgICAgICAgcmFkaW9PcHRpb24ubGFiZWxzWzBdLmNsYXNzTmFtZSA9IFwidG8tY2hlY2tlZFwiO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGFzay1cIiArIHRhc2tJRCkuaW5uZXJIVE1MID0gdGFza3NbdGFza0lEXS50YXNrRGVzY3JpcHRpb24gKyBcIiBcIiArIHRvO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByYWRpb09wdGlvbi5sYWJlbHNbMF0uY2xhc3NOYW1lID0gXCJ0by11bmNoZWNrZWRcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgc2V0RGVmYXVsdHMoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiU2V0dGluZyBkZWZhdWx0IG91dGNvbWVzXCIpO1xuICAgICAgICBsZXQgdGFza3MgPSB0aGlzLl90YXNrc1RyYWNraW5nSGVscGVyLl9zZWxlY3RlZFJlY29yZHNUZW1wbGF0ZS50YXNrcztcbiAgICAgICAgdGFza3MuZm9yRWFjaCgodCwgaSkgPT4ge1xuICAgICAgICAgICAgdmFyIGZpcnN0VGFza09wdGlvbklkID0gaSArIFwiLTBcIjtcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGZpcnN0VGFza09wdGlvbklkKS5jaGVja2VkID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuc2V0T3V0Y29tZShmaXJzdFRhc2tPcHRpb25JZCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGdldFRhc2tJbmZvKHRhc2tJRCkge1xuICAgICAgICByZXR1cm4gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0YXNrLVwiICsgdGFza0lEKS5pbm5lclRleHQ7XG4gICAgfVxuICAgIFxuICAgIGdldEN1cnJlbnRJbmZvKCkge1xuICAgICAgICBsZXQgaWRzID0gdGhpcy5fdGFza3NUcmFja2luZ0hlbHBlci5zZWxlY3RlZFJlY29yZHNUZW1wbGF0ZS5pbnB1dEZpZWxkSURzO1xuICAgICAgICBsZXQgaW5wdXRGaWVsZE5hbWVzID0gdGhpcy5fdGFza3NUcmFja2luZ0hlbHBlci5zZWxlY3RlZFJlY29yZHNUZW1wbGF0ZS5pbnB1dEZpZWxkTmFtZXM7XG4gICAgICAgIGxldCB0YXNrcyA9IHRoaXMuX3Rhc2tzVHJhY2tpbmdIZWxwZXIuc2VsZWN0ZWRSZWNvcmRzVGVtcGxhdGUudGFza3M7XG4gICAgICAgIGxldCBpbmZvID0gXCJcIjtcbiAgICAgICAgaWRzLmZvckVhY2goXG4gICAgICAgICAgICAoaWQsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgdmFyIHYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCkudmFsdWVcbiAgICAgICAgICAgICAgICBpbmZvICs9IGAke2lucHV0RmllbGROYW1lc1tpbmRleF19OiAke3Z9XFxuYFxuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgICAgICB0YXNrcy5mb3JFYWNoKChfLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgaW5mbyArPSB0aGlzLmdldFRhc2tJbmZvKGluZGV4KSArIFwiXFxuXCI7XG4gICAgICAgIH0pO1xuICAgICAgICBpbmZvICs9IFwiQ29tbWVudHM6XFxuXCIgKyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvbW1lbnRzLXRleHRcIikudmFsdWUgKyBcIlxcblwiO1xuICAgICAgICByZXR1cm4gaW5mb1xuICAgIH1cblxuICAgIGlzQ3VycmVudEZvcm1FbXB0eSAoKSB7XG4gICAgICAgIGxldCBoYXNGaWxsZWRGaWVsZHMgPSBmYWxzZTtcbiAgICAgICAgbGV0IGhhc0NvbW1lbnRzID0gKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29tbWVudHMtdGV4dFwiKS52YWx1ZSA+IDApO1xuICAgICAgICBsZXQgaWRzID0gdGhpcy5fdGFza3NUcmFja2luZ0hlbHBlci5zZWxlY3RlZFJlY29yZHNUZW1wbGF0ZS5pbnB1dEZpZWxkSURzO1xuXG4gICAgICAgIGZvciAodmFyIGluZGV4ID0gMCwgbiA9IGlkcy5sZW5ndGg7IGluZGV4IDwgbjsgaW5kZXgrKykge1xuICAgICAgICAgICAgdmFyIGluRmllbGQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZHNbaW5kZXhdKTtcbiAgICAgICAgICAgIGlmIChpbkZpZWxkLnZhbHVlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBoYXNGaWxsZWRGaWVsZHMgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiAhaGFzRmlsbGVkRmllbGRzICYmICFoYXNDb21tZW50cztcbiAgICB9XG5cbiAgICBzaG93VW5zYXZlZFJlY29yZCgpe1xuICAgICAgICBsZXQgdHRoID0gdGhpcy5fdGFza3NUcmFja2luZ0hlbHBlcjtcbiAgICAgICAgdHRoLmxvYWRVbnNhdmVkUmVjb3JkKCk7XG4gICAgICAgIGxldCBzaG93ID0gKGlkcykgPT4ge1xuICAgICAgICAgICAgbGV0IGZpZWxkc0luZm8gPSB0dGguX3Vuc2F2ZWRSZWNvcmQuX2ZpZWxkc0luZm87XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGlkcy5mb3JFYWNoKChlbGVtZW50SWQsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tGb3JFbGVtZW50KGVsZW1lbnRJZCkudGhlbihcbiAgICAgICAgICAgICAgICAgICAgICAgIChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC52YWx1ZSA9IGZpZWxkc0luZm9baW5kZXhdWzFdXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgfSx0aGlzKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdHRoLl90YXNrT3V0Y29tZXNTZWxlY3RlZC5mb3JFYWNoKFxuICAgICAgICAgICAgICAgICAgICAob3V0Y29tZUluZGV4LCB0YXNrSW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0b2lkID0gdGFza0luZGV4ICsgXCItXCIgKyBvdXRjb21lSW5kZXg7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgb3V0Y29tZUVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0b2lkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG91dGNvbWVFbGVtZW50LmNoZWNrZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRPdXRjb21lKHRvaWQpO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLCB0aGlzKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29tbWVudHMtdGV4dFwiKS52YWx1ZSA9IHR0aC5fdW5zYXZlZFJlY29yZC5fY29tbWVudHM7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfVxuXG4gICAgICAgIH1cbiAgICAgICAgc2hvdy5iaW5kKHRoaXMpO1xuXG4gICAgICAgIHR0aC5zZWxlY3RlZFJlY29yZHNUZW1wbGF0ZS51cGRhdGVJbnB1dElEcygpLnRoZW4oc2hvdyk7XG4gICAgICAgIFxuICAgIH1cblxuICAgIHVwZGF0ZVVuc2F2ZWRSZWNvcmQoZXZlbnQpe1xuICAgICAgICBsZXQgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0XG4gICAgICAgIGxldCBwYXJlbnQgPSBldmVudC50YXJnZXQucGFyZW50Tm9kZTtcbiAgICAgICAgbGV0IHR0aCA9IHRoaXMudGFza3NUcmFja2luZ0hlbHBlcjtcbiAgICAgICAgc3dpdGNoIChwYXJlbnQuY2xhc3NOYW1lKSB7XG4gICAgICAgICAgICBjYXNlIFwiaW5wdXQtZmllbGQtY29udGFpbmVyXCI6XG4gICAgICAgICAgICAgICAgbGV0IGluZGV4ID0gdHRoLl9zZWxlY3RlZFJlY29yZHNUZW1wbGF0ZVxuICAgICAgICAgICAgICAgICAgICAuX2lucHV0RmllbGRJRHMuaW5kZXhPZih0YXJnZXQuaWQpO1xuICAgICAgICAgICAgICAgIGxldCB2YWx1ZSA9ICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0YXJnZXQuaWQpLnZhbHVlO1xuICAgICAgICAgICAgICAgIGxldCBmaWVsZE5hbWUgPSB0dGguX3NlbGVjdGVkUmVjb3Jkc1RlbXBsYXRlLl9pbnB1dEZpZWxkTmFtZXNbaW5kZXhdO1xuICAgICAgICAgICAgICAgIHR0aC5fdW5zYXZlZFJlY29yZC5fZmllbGRzSW5mb1tpbmRleF0gPSBbZmllbGROYW1lLHZhbHVlXTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSBcIm91dGNvbWVzLWNvbnRhaW5lclwiOlxuICAgICAgICAgICAgICAgIGxldCBhcnIgPSB0YXJnZXQuaWQuc3BsaXQoXCItXCIpO1xuICAgICAgICAgICAgICAgIHR0aC51cGRhdGVTZWxlY3RlZFRhc2tPdXRjb21lKC4uLmFycik7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgXCJjb21tZW50cy1jb250YWluZXJcIjpcbiAgICAgICAgICAgICAgICB0dGguX3Vuc2F2ZWRSZWNvcmQuX2NvbW1lbnRzID0gXG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRhcmdldC5pZCkudmFsdWU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHR0aC5zdG9yZVVuc2F2ZWRSZWNvcmQoKTtcbiAgICAgICAgLy9sZXQgcGFyZW50XG4gICAgICAgIC8vdGhpcy5fdGFza3NUcmFja2luZ0hlbHBlci5zdG9yZVVuc2F2ZWRSZWNvcmQoKTtcbiAgICB9XG5cbiAgICBoYW5kbGVDdXJyZW50UmVjb3JkQWN0aW9ucyhldmVudCl7XG4gICAgICAgIHN3aXRjaCAoZXZlbnQudGFyZ2V0LmlkKSB7XG4gICAgICAgICAgICBjYXNlICdidG4tY29weS1jdXJyZW50JzpcbiAgICAgICAgICAgICAgICB0aGlzLmNvcHlUb0NsaXBib2FyZCh0aGlzLmdldEN1cnJlbnRJbmZvKCkpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnYnRuLXRyYWNrLWN1cnJlbnQnOlxuICAgICAgICAgICAgICAgIHRoaXMudHJhY2tDdXJyZW50KCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICB9XG5cbiAgICB0cmFja0N1cnJlbnQoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiVHJhY2tpbmdcIilcbiAgICAgICAgbGV0IGhhc0VtcHR5RmllbGRzID0gZmFsc2U7XG4gICAgICAgIGxldCBpZHMgPSB0aGlzLl90YXNrc1RyYWNraW5nSGVscGVyLnNlbGVjdGVkUmVjb3Jkc1RlbXBsYXRlLmlucHV0RmllbGRJRHM7XG4gICAgICAgIGxldCB0YXNrUmVjb3Jkc0dyb3VwID0gdGhpcy5fdGFza3NUcmFja2luZ0hlbHBlci5fc2VsZWN0ZWRSZWNvcmRzR3JvdXA7XG4gICAgICAgIGxldCBzZWxlY3RlZFRlbXBsYXRlID0gdGhpcy5fdGFza3NUcmFja2luZ0hlbHBlci5fc2VsZWN0ZWRSZWNvcmRzVGVtcGxhdGU7XG5cbiAgICAgICAgZm9yICh2YXIgaW5kZXggPSAwLCBuID0gaWRzLmxlbmd0aDsgaW5kZXggPCBuOyBpbmRleCsrKSB7XG4gICAgICAgICAgICB2YXIgaW5GaWVsZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkc1tpbmRleF0pO1xuICAgICAgICAgICAgaWYgKGluRmllbGQudmFsdWUubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgICAgICBpbkZpZWxkLmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgaGFzRW1wdHlGaWVsZHMgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFoYXNFbXB0eUZpZWxkcykge1xuICAgICAgICAgICAgdmFyIGluZm8gPSB0aGlzLmdldEN1cnJlbnRJbmZvKCk7XG4gICAgICAgICAgICAvLyBDcmVhdGUgZmllbGRzIEFycmF5XG4gICAgICAgICAgICBsZXQgZmllbGRzSW5mbyA9IGlkcy5tYXAoKGlkLCBpbmRleCkgPT4gXG4gICAgICAgICAgICAgICAgW3NlbGVjdGVkVGVtcGxhdGUuaW5wdXRGaWVsZE5hbWVzW2luZGV4XSwgXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpLnZhbHVlXSk7XG5cbiAgICAgICAgICAgIC8vIENyZWF0ZSB0YXNrcyBhbmQgT3V0Y29tZXMgQXJyYXlcbiAgICAgICAgICAgIGxldCB0YXNrc0FuZE91dGNvbWVzID0gdGhpcy5fdGFza3NUcmFja2luZ0hlbHBlci5fdGFza091dGNvbWVzU2VsZWN0ZWRcbiAgICAgICAgICAgICAgICAubWFwKFxuICAgICAgICAgICAgICAgICAgICAob3V0Y29tZUluZGV4LCB0YXNrSW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0YXNrcyA9IHNlbGVjdGVkVGVtcGxhdGUudGFza3M7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgZGVzYyA9IHRhc2tzW3Rhc2tJbmRleF0udGFza0Rlc2NyaXB0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgb3V0Y29tZSA9IHRhc2tzW3Rhc2tJbmRleF0udGFza091dGNvbWVzW291dGNvbWVJbmRleF1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbZGVzYywgb3V0Y29tZV07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBsZXQgY29tbWVudHMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvbW1lbnRzLXRleHRcIikudmFsdWU7XG4gICAgICAgICAgICB2YXIgdHIgPSBuZXcgVGFza1JlY29yZChmaWVsZHNJbmZvLCB0YXNrc0FuZE91dGNvbWVzLCBjb21tZW50cywgXCJcIik7XG4gICAgICAgICAgICB0YXNrUmVjb3Jkc0dyb3VwLmFkZFJlY29yZCh0cik7XG4gICAgICAgICAgICB0aGlzLl90YXNrc1RyYWNraW5nSGVscGVyLnN0b3JlU2VsZWN0ZWRSZWNvcmRzR3JvdXAoKTtcbiAgICAgICAgICAgIHRyLnJlY2FsY3VsYXRlSUQoKS50aGVuKCgpID0+IHRoaXMuc2hvd0luTG9nKHRyKSk7XG4gICAgICAgICAgICB0aGlzLmNsZWFyRmllbGRzKCk7XG4gICAgICAgICAgICB0aGlzLl90YXNrc1RyYWNraW5nSGVscGVyLnN0b3JlVW5zYXZlZFJlY29yZCgpOyAvLyBBZnRlciBjbGVhcmVkXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzaG93SW5Mb2codGFza1JlY29yZCkge1xuICAgICAgICBsZXQgbG9nRGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJsb2dcIik7XG4gICAgICAgIHRoaXMuX2xvZ0NvdW50ICs9IDE7XG4gICAgICAgIGxldCBpZCA9IHRhc2tSZWNvcmQuaWQ7XG4gICAgICAgIGxldCByZWNvcmQgPVxuICAgICAgICAgICAgYDxkaXYgY2xhc3M9J3JlY29yZC1jb250YWluZXInIGlkPSdyYy0ke2lkfSc+XG4gICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9J2NvcHknIGlkPSdjb3B5LSR7aWR9Jz4mI3gyMzk4OzwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSdyZWNvcmQtaGVhZGVyJz4gXG4gICAgICAgICAgICAgICAgICAgICAgICA8aDMgY2xhc3M9J2NvdW50Jz4ke3RoaXMubG9nQ291bnR9PC9oMz4gXG4gICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPSdjaGstJHtpZH0nIGNsYXNzPSdzbWFsbC1sYWJlbCc+VHJhY2tlZDwvbGFiZWw+IFxuICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IGlkPSdjaGstJHtpZH0nIHR5cGU9J2NoZWNrYm94Jy8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSdkZWxldGUtYnRuJyBpZD0nZHItJHtpZH0nPiYjeDFGNUQxOzwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBpZD0nJHtpZH0nIGNsYXNzPSdyZWNvcmQnPiR7dGFza1JlY29yZC5nZXRJbmZvKCl9PC9kaXY+IFxuICAgICAgICAgICAgPC9kaXY+YDtcbiAgICAgICAgbGV0IGVsZW1lbnQgPSAgdGhpcy5kb21QYXJzZXIucGFyc2VGcm9tU3RyaW5nKHJlY29yZC50b1N0cmluZygpLCAndGV4dC9odG1sJyk7XG4gICAgICAgIGxvZ0Rpdi5wcmVwZW5kKGVsZW1lbnQuYm9keS5maXJzdENoaWxkKTtcbiAgICAgICAgbGV0IHN0YXR1cyA9IHRhc2tSZWNvcmQudHJhY2tlZDtcbiAgICAgICAgdGhpcy5jaGVja0ZvckVsZW1lbnQoJ2Noay0nK2lkKS50aGVuKGVsID0+IGVsLmNoZWNrZWQgPSBzdGF0dXMpO1xuICAgICAgICB0aGlzLmNoZWNrRm9yRWxlbWVudChpZCkudGhlbihlbCA9PiB0aGlzLnVwZGF0ZVJlY29yZEJhY2tncm91bmQoZWwuaWQpKTtcbiAgICAgICAgXG4gICAgfVxuXG4gICAgc2hvd0N1cnJlbnRHcm91cCgpIHtcbiAgICAgICAgbGV0IGxvZ0RpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibG9nXCIpLmlubmVySFRNTCA9IFwiXCI7XG4gICAgICAgIGxldCB0YXNrUmVjb3JkcyA9IHRoaXMuX3Rhc2tzVHJhY2tpbmdIZWxwZXIuX3NlbGVjdGVkUmVjb3Jkc0dyb3VwLnJlY29yZHM7XG4gICAgICAgIHRoaXMuX2xvZ0NvdW50ID0gMDtcbiAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHRhc2tSZWNvcmRzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICAgICAgY29uc3QgdHIgPSB0YXNrUmVjb3Jkc1tpbmRleF07XG4gICAgICAgICAgICB0ci5yZWNhbGN1bGF0ZUlEKCkudGhlbiggKCgpID0+ICB0aGlzLnNob3dJbkxvZyh0cikpLmJpbmQodGhpcykpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY2xlYXJGaWVsZHMoKSB7XG4gICAgICAgIGxldCBpZHMgPSB0aGlzLl90YXNrc1RyYWNraW5nSGVscGVyLnNlbGVjdGVkUmVjb3Jkc1RlbXBsYXRlLmlucHV0RmllbGRJRHM7XG4gICAgICAgIGlkcy5mb3JFYWNoKGlkID0+IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKS52YWx1ZSA9IFwiXCIpO1xuICAgICAgICB0aGlzLnNldERlZmF1bHRzKCk7XG4gICAgICAgIHRoaXMuX3Rhc2tzVHJhY2tpbmdIZWxwZXIucmVzZXRVbnNhdmVkUmVjb3JkKCk7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29tbWVudHMtdGV4dFwiKS52YWx1ZSA9IFwiXCI7XG4gICAgfVxuICAgIC8vIENvcHkgY3VycmVudCBpbmZvIHRvIGNsaXBib2FyZFxuICAgIC8vIGNvcHlJbmZvXG4gICAgY29weVRvQ2xpcGJvYXJkKHRleHQpIHtcbiAgICAgICAgbmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQodGV4dCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvKiBjbGlwYm9hcmQgc3VjY2Vzc2Z1bGx5IHNldCAqL1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJUZXh0IGNvcGllZFwiKTtcbiAgICAgICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgLyogY2xpcGJvYXJkIHdyaXRlIGZhaWxlZCAqL1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJUZXh0IG5vdCBjb3BpZWRcIik7XG4gICAgICAgIH0pO1xuXG4gICAgfVxuICAgIGFzeW5jIGNoZWNrRm9yRWxlbWVudChpZCkge1xuICAgICAgICBsZXQgZWwgPSBudWxsO1xuICAgICAgICBkbyB7XG4gICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHJlcXVlc3RBbmltYXRpb25GcmFtZShyZXNvbHZlKSk7XG4gICAgICAgICAgICBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTtcbiAgICAgICAgfSB3aGlsZSAoZWwgPT09IG51bGwpO1xuICAgICAgICByZXR1cm4gZWw7XG4gICAgfVxuXG59XG5cbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/html-views.js\n')},"./src/index.js":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _style_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./style.css */ "./src/style.css");\n/* harmony import */ var _style_css__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_style_css__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _tasks_tracking_helper_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./tasks-tracking-helper.js */ "./src/tasks-tracking-helper.js");\n/* harmony import */ var _trh__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./trh */ "./src/trh.js");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "copyToClipboard", function() { return _trh__WEBPACK_IMPORTED_MODULE_2__["copyToClipboard"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "copyInputToClipboard", function() { return _trh__WEBPACK_IMPORTED_MODULE_2__["copyInputToClipboard"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "hash", function() { return _trh__WEBPACK_IMPORTED_MODULE_2__["hash"]; });\n\n//\n// Copyright (c) 2020, J. Garcia <0x4a.dev at gmail.com> \n// All rights reserved.\n// \n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions are met:\n//     * Redistributions of source code must retain the above copyright\n//       notice, this list of conditions and the following disclaimer.\n//     * Redistributions in binary form must reproduce the above copyright\n//       notice, this list of conditions and the following disclaimer in the\n//       documentation and/or other materials provided with the distribution.\n//     * Neither the name of the copyright holder nor the\n//       names of its contributors may be used to endorse or promote products\n//       derived from this software without specific prior written permission.\n// \n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND\n// ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n// WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n// DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER BE LIABLE FOR ANY\n// DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n// (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n// LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n// ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n// SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n\n\n\n\n\n\nlet tth = new _tasks_tracking_helper_js__WEBPACK_IMPORTED_MODULE_1__["default"]();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvaW5kZXguanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXguanM/YjYzNSJdLCJzb3VyY2VzQ29udGVudCI6WyIvL1xuLy8gQ29weXJpZ2h0IChjKSAyMDIwLCBKLiBHYXJjaWEgPDB4NGEuZGV2IGF0IGdtYWlsLmNvbT4gXG4vLyBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gXG4vLyBSZWRpc3RyaWJ1dGlvbiBhbmQgdXNlIGluIHNvdXJjZSBhbmQgYmluYXJ5IGZvcm1zLCB3aXRoIG9yIHdpdGhvdXRcbi8vIG1vZGlmaWNhdGlvbiwgYXJlIHBlcm1pdHRlZCBwcm92aWRlZCB0aGF0IHRoZSBmb2xsb3dpbmcgY29uZGl0aW9ucyBhcmUgbWV0OlxuLy8gICAgICogUmVkaXN0cmlidXRpb25zIG9mIHNvdXJjZSBjb2RlIG11c3QgcmV0YWluIHRoZSBhYm92ZSBjb3B5cmlnaHRcbi8vICAgICAgIG5vdGljZSwgdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lci5cbi8vICAgICAqIFJlZGlzdHJpYnV0aW9ucyBpbiBiaW5hcnkgZm9ybSBtdXN0IHJlcHJvZHVjZSB0aGUgYWJvdmUgY29weXJpZ2h0XG4vLyAgICAgICBub3RpY2UsIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIgaW4gdGhlXG4vLyAgICAgICBkb2N1bWVudGF0aW9uIGFuZC9vciBvdGhlciBtYXRlcmlhbHMgcHJvdmlkZWQgd2l0aCB0aGUgZGlzdHJpYnV0aW9uLlxuLy8gICAgICogTmVpdGhlciB0aGUgbmFtZSBvZiB0aGUgY29weXJpZ2h0IGhvbGRlciBub3IgdGhlXG4vLyAgICAgICBuYW1lcyBvZiBpdHMgY29udHJpYnV0b3JzIG1heSBiZSB1c2VkIHRvIGVuZG9yc2Ugb3IgcHJvbW90ZSBwcm9kdWN0c1xuLy8gICAgICAgZGVyaXZlZCBmcm9tIHRoaXMgc29mdHdhcmUgd2l0aG91dCBzcGVjaWZpYyBwcmlvciB3cml0dGVuIHBlcm1pc3Npb24uXG4vLyBcbi8vIFRISVMgU09GVFdBUkUgSVMgUFJPVklERUQgQlkgVEhFIENPUFlSSUdIVCBIT0xERVJTIEFORCBDT05UUklCVVRPUlMgXCJBUyBJU1wiIEFORFxuLy8gQU5ZIEVYUFJFU1MgT1IgSU1QTElFRCBXQVJSQU5USUVTLCBJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTywgVEhFIElNUExJRURcbi8vIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZIEFORCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBUkVcbi8vIERJU0NMQUlNRUQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBDT1BZUklHSFQgSE9MREVSIEJFIExJQUJMRSBGT1IgQU5ZXG4vLyBESVJFQ1QsIElORElSRUNULCBJTkNJREVOVEFMLCBTUEVDSUFMLCBFWEVNUExBUlksIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFU1xuLy8gKElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBQUk9DVVJFTUVOVCBPRiBTVUJTVElUVVRFIEdPT0RTIE9SIFNFUlZJQ0VTO1xuLy8gTE9TUyBPRiBVU0UsIERBVEEsIE9SIFBST0ZJVFM7IE9SIEJVU0lORVNTIElOVEVSUlVQVElPTikgSE9XRVZFUiBDQVVTRUQgQU5EXG4vLyBPTiBBTlkgVEhFT1JZIE9GIExJQUJJTElUWSwgV0hFVEhFUiBJTiBDT05UUkFDVCwgU1RSSUNUIExJQUJJTElUWSwgT1IgVE9SVFxuLy8gKElOQ0xVRElORyBORUdMSUdFTkNFIE9SIE9USEVSV0lTRSkgQVJJU0lORyBJTiBBTlkgV0FZIE9VVCBPRiBUSEUgVVNFIE9GIFRISVNcbi8vIFNPRlRXQVJFLCBFVkVOIElGIEFEVklTRUQgT0YgVEhFIFBPU1NJQklMSVRZIE9GIFNVQ0ggREFNQUdFLlxuLy9cblxuaW1wb3J0ICcuL3N0eWxlLmNzcydcbmltcG9ydCBUYXNrc1RyYWNraW5nSGVscGVyIGZyb20gICcuL3Rhc2tzLXRyYWNraW5nLWhlbHBlci5qcyc7XG5pbXBvcnQge2NvcHlUb0NsaXBib2FyZCxjb3B5SW5wdXRUb0NsaXBib2FyZCxoYXNofSBmcm9tICcuL3RyaCc7XG5leHBvcnQge2NvcHlUb0NsaXBib2FyZCxjb3B5SW5wdXRUb0NsaXBib2FyZCxoYXNofTtcblxubGV0IHR0aCA9IG5ldyBUYXNrc1RyYWNraW5nSGVscGVyKCk7Il0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/index.js\n')},"./src/records-group.js":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return RecordsGroup; });\n// RecordsGroup\n// Holds a records group with date and type\nclass RecordsGroup {\n    constructor(name,type, ...args) {\n        this._type = type;\n        this._name = name;\n        this._date = \n            (args.length == 2) ?\n                args[0] :\n                new Date().toISOString().replace("T", " ").substring(0, 19);\n        this._id = this.generateID();\n        this._records = (args.length == 2) ? args[1]: [];\n    }\n\n    get id (){return this._id;}\n    get date (){return this._date;}\n    get type (){return this._type;}\n    set type(t){this._type = t;}\n    get records (){return this._records;}\n    get name (){return this._name;}\n    set name (name){\n        this._name = name;\n        this._id = this.generateID();\n    }\n    \n    generateID () { \n        return this._name; \n    }\n    addRecord(r) {\n        this._records.push(r);\n    }\n    deleteRecord(id) {\n        this._records =\n            this._records.filter(r => r.id !== id);\n        console.log("deleted: " +id);\n        console.log(this._records);\n    }\n    setTrackedStatus(id, status) {\n        let r = this._records.find(r => r.id === id);\n        r.tracked = status;\n    }\n    getTrackedStatus(id) {\n        let r = this._records.find(r => r.id === id);\n        return r.tracked ;\n    }\n    toPrettyString(){\n        let dashes = "\\n" + "-".repeat(80) + "\\n";\n        let stars = "*".repeat(80) + "\\n";\n        let info = stars;\n        info += `Records Group : ${this.name}\\nCreated on: ${this.date}\\n`;\n        info += stars;\n        info += this.records.map(r => r._summary).join(dashes);\n        return info;\n    }\n    getRecord(id){\n        let r = this._records.find(r => r.id === id);\n        console.log(r);\n        return r;\n    }\n    toBlob(){\n        return new Blob([this.toPrettyString()],{type: "text/plain", endings:"native"});\n    }\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcmVjb3Jkcy1ncm91cC5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9yZWNvcmRzLWdyb3VwLmpzPzYxYzciXSwic291cmNlc0NvbnRlbnQiOlsiLy8gUmVjb3Jkc0dyb3VwXG4vLyBIb2xkcyBhIHJlY29yZHMgZ3JvdXAgd2l0aCBkYXRlIGFuZCB0eXBlXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBSZWNvcmRzR3JvdXAge1xuICAgIGNvbnN0cnVjdG9yKG5hbWUsdHlwZSwgLi4uYXJncykge1xuICAgICAgICB0aGlzLl90eXBlID0gdHlwZTtcbiAgICAgICAgdGhpcy5fbmFtZSA9IG5hbWU7XG4gICAgICAgIHRoaXMuX2RhdGUgPSBcbiAgICAgICAgICAgIChhcmdzLmxlbmd0aCA9PSAyKSA/XG4gICAgICAgICAgICAgICAgYXJnc1swXSA6XG4gICAgICAgICAgICAgICAgbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnJlcGxhY2UoXCJUXCIsIFwiIFwiKS5zdWJzdHJpbmcoMCwgMTkpO1xuICAgICAgICB0aGlzLl9pZCA9IHRoaXMuZ2VuZXJhdGVJRCgpO1xuICAgICAgICB0aGlzLl9yZWNvcmRzID0gKGFyZ3MubGVuZ3RoID09IDIpID8gYXJnc1sxXTogW107XG4gICAgfVxuXG4gICAgZ2V0IGlkICgpe3JldHVybiB0aGlzLl9pZDt9XG4gICAgZ2V0IGRhdGUgKCl7cmV0dXJuIHRoaXMuX2RhdGU7fVxuICAgIGdldCB0eXBlICgpe3JldHVybiB0aGlzLl90eXBlO31cbiAgICBzZXQgdHlwZSh0KXt0aGlzLl90eXBlID0gdDt9XG4gICAgZ2V0IHJlY29yZHMgKCl7cmV0dXJuIHRoaXMuX3JlY29yZHM7fVxuICAgIGdldCBuYW1lICgpe3JldHVybiB0aGlzLl9uYW1lO31cbiAgICBzZXQgbmFtZSAobmFtZSl7XG4gICAgICAgIHRoaXMuX25hbWUgPSBuYW1lO1xuICAgICAgICB0aGlzLl9pZCA9IHRoaXMuZ2VuZXJhdGVJRCgpO1xuICAgIH1cbiAgICBcbiAgICBnZW5lcmF0ZUlEICgpIHsgXG4gICAgICAgIHJldHVybiB0aGlzLl9uYW1lOyBcbiAgICB9XG4gICAgYWRkUmVjb3JkKHIpIHtcbiAgICAgICAgdGhpcy5fcmVjb3Jkcy5wdXNoKHIpO1xuICAgIH1cbiAgICBkZWxldGVSZWNvcmQoaWQpIHtcbiAgICAgICAgdGhpcy5fcmVjb3JkcyA9XG4gICAgICAgICAgICB0aGlzLl9yZWNvcmRzLmZpbHRlcihyID0+IHIuaWQgIT09IGlkKTtcbiAgICAgICAgY29uc29sZS5sb2coXCJkZWxldGVkOiBcIiAraWQpO1xuICAgICAgICBjb25zb2xlLmxvZyh0aGlzLl9yZWNvcmRzKTtcbiAgICB9XG4gICAgc2V0VHJhY2tlZFN0YXR1cyhpZCwgc3RhdHVzKSB7XG4gICAgICAgIGxldCByID0gdGhpcy5fcmVjb3Jkcy5maW5kKHIgPT4gci5pZCA9PT0gaWQpO1xuICAgICAgICByLnRyYWNrZWQgPSBzdGF0dXM7XG4gICAgfVxuICAgIGdldFRyYWNrZWRTdGF0dXMoaWQpIHtcbiAgICAgICAgbGV0IHIgPSB0aGlzLl9yZWNvcmRzLmZpbmQociA9PiByLmlkID09PSBpZCk7XG4gICAgICAgIHJldHVybiByLnRyYWNrZWQgO1xuICAgIH1cbiAgICB0b1ByZXR0eVN0cmluZygpe1xuICAgICAgICBsZXQgZGFzaGVzID0gXCJcXG5cIiArIFwiLVwiLnJlcGVhdCg4MCkgKyBcIlxcblwiO1xuICAgICAgICBsZXQgc3RhcnMgPSBcIipcIi5yZXBlYXQoODApICsgXCJcXG5cIjtcbiAgICAgICAgbGV0IGluZm8gPSBzdGFycztcbiAgICAgICAgaW5mbyArPSBgUmVjb3JkcyBHcm91cCA6ICR7dGhpcy5uYW1lfVxcbkNyZWF0ZWQgb246ICR7dGhpcy5kYXRlfVxcbmA7XG4gICAgICAgIGluZm8gKz0gc3RhcnM7XG4gICAgICAgIGluZm8gKz0gdGhpcy5yZWNvcmRzLm1hcChyID0+IHIuX3N1bW1hcnkpLmpvaW4oZGFzaGVzKTtcbiAgICAgICAgcmV0dXJuIGluZm87XG4gICAgfVxuICAgIGdldFJlY29yZChpZCl7XG4gICAgICAgIGxldCByID0gdGhpcy5fcmVjb3Jkcy5maW5kKHIgPT4gci5pZCA9PT0gaWQpO1xuICAgICAgICBjb25zb2xlLmxvZyhyKTtcbiAgICAgICAgcmV0dXJuIHI7XG4gICAgfVxuICAgIHRvQmxvYigpe1xuICAgICAgICByZXR1cm4gbmV3IEJsb2IoW3RoaXMudG9QcmV0dHlTdHJpbmcoKV0se3R5cGU6IFwidGV4dC9wbGFpblwiLCBlbmRpbmdzOlwibmF0aXZlXCJ9KTtcbiAgICB9XG59Il0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/records-group.js\n')},"./src/records-template.js":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return RecordsTemplate; });\n/* harmony import */ var _trh_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./trh.js */ "./src/trh.js");\n/* harmony import */ var _task_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./task.js */ "./src/task.js");\n\n\n\n// RecordsTemplate\n// Stores input values and tasks related to \n// a Record type\nclass RecordsTemplate {\n    constructor(templateText){\n        this._templateText = templateText;\n        this.updateTemplate();\n    }\n    get name() { return this._name; }\n    set name(n) { this._name = n; }\n    get inputFieldNames() { return this._inputFieldNames; }\n    get inputFieldIDs() { return this._inputFieldIDs; }\n    get tasks() { return this._tasks; }\n    get templateText() { return this._templateText; }\n    set templateText(text) { \n        this._templateText = text; \n        this.updateTemplate(); \n    }\n\n    updateTemplate() {\n        let rawLines = this._templateText.split(\'\\n\');\n        this._lines = rawLines.filter(l => l.length > 0);\n        try {\n            // attempt parse\n            let newName = this.generateNameFromTemplate();\n            let newInputFieldNames = this.generateInputFields();\n            let newTasks = this.generateTasks();\n            // assign values if no errors returned\n            this._name = newName;\n            this._inputFieldNames = newInputFieldNames;\n            this._inputFieldIDs = [];\n            this._tasks = newTasks;\n        } catch (error) {\n            this._name = "Parse Error";\n            this._inputFieldNames = ["Error"];\n            this._inputFieldIDs = [];\n            this._tasks = [new _task_js__WEBPACK_IMPORTED_MODULE_1__["default"]("Error::Error")];\n            console.log(error);\n        }\n\n    }\n\n    async updateInputIDs(){\n        this._inputFieldIDs = [];\n        let ids = []\n        for (let index = 0, length = this._inputFieldNames.length; index < length; index++) {\n            ids.push(await Object(_trh_js__WEBPACK_IMPORTED_MODULE_0__["hash"])(this._inputFieldNames[index]))\n        }\n        this._inputFieldIDs = ids;\n        return ids;\n    }\n\n    generateNameFromTemplate(){\n        if (this._lines[0].match(/[^\\s]+/)) {\n            return this._lines[0];\n        } else {\n            throw new SyntaxError("No name entered");\n        }\n    }\n    generateInputFields(){\n        if (this._lines[1] !== undefined) {\n            let reg = /(?<=^Fields:\\s*).+/;\n            let match = this._lines[1].match(reg);\n            if (match) {\n                return match[0].split(\',\');\n\n            } else {\n                throw new SyntaxError("No fields entered");\n            }\n        } \n    }\n    generateTasks(){\n        let tasks = [];\n        let lines = this._templateText.split(\'\\n\');\n        if (lines[2].match(/Tasks:\\n/g) != 0 ){\n            for (let index = 3, count = lines.length; index < count; index++) {\n                const element = lines[index];\n                tasks.push(new _task_js__WEBPACK_IMPORTED_MODULE_1__["default"](element));\n            }\n        } else {\n                throw new SyntaxError("No tasks entered");\n        }\n        return tasks;\n    }\n\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcmVjb3Jkcy10ZW1wbGF0ZS5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9yZWNvcmRzLXRlbXBsYXRlLmpzPzEyMzgiXSwic291cmNlc0NvbnRlbnQiOlsiXG5pbXBvcnQgIHtoYXNofSAgZnJvbSAnLi90cmguanMnO1xuaW1wb3J0IFRhc2sgZnJvbSAnLi90YXNrLmpzJztcbi8vIFJlY29yZHNUZW1wbGF0ZVxuLy8gU3RvcmVzIGlucHV0IHZhbHVlcyBhbmQgdGFza3MgcmVsYXRlZCB0byBcbi8vIGEgUmVjb3JkIHR5cGVcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJlY29yZHNUZW1wbGF0ZSB7XG4gICAgY29uc3RydWN0b3IodGVtcGxhdGVUZXh0KXtcbiAgICAgICAgdGhpcy5fdGVtcGxhdGVUZXh0ID0gdGVtcGxhdGVUZXh0O1xuICAgICAgICB0aGlzLnVwZGF0ZVRlbXBsYXRlKCk7XG4gICAgfVxuICAgIGdldCBuYW1lKCkgeyByZXR1cm4gdGhpcy5fbmFtZTsgfVxuICAgIHNldCBuYW1lKG4pIHsgdGhpcy5fbmFtZSA9IG47IH1cbiAgICBnZXQgaW5wdXRGaWVsZE5hbWVzKCkgeyByZXR1cm4gdGhpcy5faW5wdXRGaWVsZE5hbWVzOyB9XG4gICAgZ2V0IGlucHV0RmllbGRJRHMoKSB7IHJldHVybiB0aGlzLl9pbnB1dEZpZWxkSURzOyB9XG4gICAgZ2V0IHRhc2tzKCkgeyByZXR1cm4gdGhpcy5fdGFza3M7IH1cbiAgICBnZXQgdGVtcGxhdGVUZXh0KCkgeyByZXR1cm4gdGhpcy5fdGVtcGxhdGVUZXh0OyB9XG4gICAgc2V0IHRlbXBsYXRlVGV4dCh0ZXh0KSB7IFxuICAgICAgICB0aGlzLl90ZW1wbGF0ZVRleHQgPSB0ZXh0OyBcbiAgICAgICAgdGhpcy51cGRhdGVUZW1wbGF0ZSgpOyBcbiAgICB9XG5cbiAgICB1cGRhdGVUZW1wbGF0ZSgpIHtcbiAgICAgICAgbGV0IHJhd0xpbmVzID0gdGhpcy5fdGVtcGxhdGVUZXh0LnNwbGl0KCdcXG4nKTtcbiAgICAgICAgdGhpcy5fbGluZXMgPSByYXdMaW5lcy5maWx0ZXIobCA9PiBsLmxlbmd0aCA+IDApO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gYXR0ZW1wdCBwYXJzZVxuICAgICAgICAgICAgbGV0IG5ld05hbWUgPSB0aGlzLmdlbmVyYXRlTmFtZUZyb21UZW1wbGF0ZSgpO1xuICAgICAgICAgICAgbGV0IG5ld0lucHV0RmllbGROYW1lcyA9IHRoaXMuZ2VuZXJhdGVJbnB1dEZpZWxkcygpO1xuICAgICAgICAgICAgbGV0IG5ld1Rhc2tzID0gdGhpcy5nZW5lcmF0ZVRhc2tzKCk7XG4gICAgICAgICAgICAvLyBhc3NpZ24gdmFsdWVzIGlmIG5vIGVycm9ycyByZXR1cm5lZFxuICAgICAgICAgICAgdGhpcy5fbmFtZSA9IG5ld05hbWU7XG4gICAgICAgICAgICB0aGlzLl9pbnB1dEZpZWxkTmFtZXMgPSBuZXdJbnB1dEZpZWxkTmFtZXM7XG4gICAgICAgICAgICB0aGlzLl9pbnB1dEZpZWxkSURzID0gW107XG4gICAgICAgICAgICB0aGlzLl90YXNrcyA9IG5ld1Rhc2tzO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgdGhpcy5fbmFtZSA9IFwiUGFyc2UgRXJyb3JcIjtcbiAgICAgICAgICAgIHRoaXMuX2lucHV0RmllbGROYW1lcyA9IFtcIkVycm9yXCJdO1xuICAgICAgICAgICAgdGhpcy5faW5wdXRGaWVsZElEcyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5fdGFza3MgPSBbbmV3IFRhc2soXCJFcnJvcjo6RXJyb3JcIildO1xuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xuICAgICAgICB9XG5cbiAgICB9XG5cbiAgICBhc3luYyB1cGRhdGVJbnB1dElEcygpe1xuICAgICAgICB0aGlzLl9pbnB1dEZpZWxkSURzID0gW107XG4gICAgICAgIGxldCBpZHMgPSBbXVxuICAgICAgICBmb3IgKGxldCBpbmRleCA9IDAsIGxlbmd0aCA9IHRoaXMuX2lucHV0RmllbGROYW1lcy5sZW5ndGg7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgICAgICBpZHMucHVzaChhd2FpdCBoYXNoKHRoaXMuX2lucHV0RmllbGROYW1lc1tpbmRleF0pKVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2lucHV0RmllbGRJRHMgPSBpZHM7XG4gICAgICAgIHJldHVybiBpZHM7XG4gICAgfVxuXG4gICAgZ2VuZXJhdGVOYW1lRnJvbVRlbXBsYXRlKCl7XG4gICAgICAgIGlmICh0aGlzLl9saW5lc1swXS5tYXRjaCgvW15cXHNdKy8pKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fbGluZXNbMF07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgU3ludGF4RXJyb3IoXCJObyBuYW1lIGVudGVyZWRcIik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2VuZXJhdGVJbnB1dEZpZWxkcygpe1xuICAgICAgICBpZiAodGhpcy5fbGluZXNbMV0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbGV0IHJlZyA9IC8oPzw9XkZpZWxkczpcXHMqKS4rLztcbiAgICAgICAgICAgIGxldCBtYXRjaCA9IHRoaXMuX2xpbmVzWzFdLm1hdGNoKHJlZyk7XG4gICAgICAgICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbWF0Y2hbMF0uc3BsaXQoJywnKTtcblxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgU3ludGF4RXJyb3IoXCJObyBmaWVsZHMgZW50ZXJlZFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBcbiAgICB9XG4gICAgZ2VuZXJhdGVUYXNrcygpe1xuICAgICAgICBsZXQgdGFza3MgPSBbXTtcbiAgICAgICAgbGV0IGxpbmVzID0gdGhpcy5fdGVtcGxhdGVUZXh0LnNwbGl0KCdcXG4nKTtcbiAgICAgICAgaWYgKGxpbmVzWzJdLm1hdGNoKC9UYXNrczpcXG4vZykgIT0gMCApe1xuICAgICAgICAgICAgZm9yIChsZXQgaW5kZXggPSAzLCBjb3VudCA9IGxpbmVzLmxlbmd0aDsgaW5kZXggPCBjb3VudDsgaW5kZXgrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGVsZW1lbnQgPSBsaW5lc1tpbmRleF07XG4gICAgICAgICAgICAgICAgdGFza3MucHVzaChuZXcgVGFzayhlbGVtZW50KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFN5bnRheEVycm9yKFwiTm8gdGFza3MgZW50ZXJlZFwiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGFza3M7XG4gICAgfVxuXG59Il0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/records-template.js\n')},"./src/style.css":function(module,exports,__webpack_require__){eval("// extracted by mini-css-extract-plugin//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvc3R5bGUuY3NzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL3N0eWxlLmNzcz9lMzIwIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIGV4dHJhY3RlZCBieSBtaW5pLWNzcy1leHRyYWN0LXBsdWdpbiJdLCJtYXBwaW5ncyI6IkFBQUEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/style.css\n")},"./src/task-record.js":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return TaskRecord; });\n/* harmony import */ var _trh_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./trh.js */ "./src/trh.js");\n// TaskRecord\n// Stores the outcomes and entered fields in a single string.\n\nclass TaskRecord{\n    constructor(fieldsInfo, tasksAndOutcomes , comments, creationDate) {\n        this._fieldsInfo = fieldsInfo;\n        this._tasksAndOutcomes = tasksAndOutcomes;\n        this._comments = comments;\n        this.tracked = false\n        this._creationDate = creationDate;\n        if (this._creationDate == "") {\n            var now = new Date()\n            this._creationDate = now.toISOString().replace("T", " ").substring(0, 19);\n        }\n        this._summary = this.getInfo();\n    }\n    get tracked(){ return this._tracked;}\n    get summary(){ return this._summary;}\n    set tracked(val){this._tracked = val}\n    async recalculateID () {\n        this.id = await Object(_trh_js__WEBPACK_IMPORTED_MODULE_0__["hash"])(this._summary);\n    }\n    getInfo() {\n        let info = this._fieldsInfo.map(infoPair => infoPair.join(": ")).join("\\n");\n        info += "\\n";\n        info += this._tasksAndOutcomes.map(infoPair => infoPair.join(" ")).join("\\n");\n        info += "\\n";\n        info += "Comments:\\n" + this._comments || false;\n        info += "\\n";\n        info += "Date: " + this._creationDate;\n        return info;\n    }\n    \n\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdGFzay1yZWNvcmQuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvdGFzay1yZWNvcmQuanM/YjUxZiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUYXNrUmVjb3JkXG4vLyBTdG9yZXMgdGhlIG91dGNvbWVzIGFuZCBlbnRlcmVkIGZpZWxkcyBpbiBhIHNpbmdsZSBzdHJpbmcuXG5pbXBvcnQge2hhc2h9IGZyb20gJy4vdHJoLmpzJztcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRhc2tSZWNvcmR7XG4gICAgY29uc3RydWN0b3IoZmllbGRzSW5mbywgdGFza3NBbmRPdXRjb21lcyAsIGNvbW1lbnRzLCBjcmVhdGlvbkRhdGUpIHtcbiAgICAgICAgdGhpcy5fZmllbGRzSW5mbyA9IGZpZWxkc0luZm87XG4gICAgICAgIHRoaXMuX3Rhc2tzQW5kT3V0Y29tZXMgPSB0YXNrc0FuZE91dGNvbWVzO1xuICAgICAgICB0aGlzLl9jb21tZW50cyA9IGNvbW1lbnRzO1xuICAgICAgICB0aGlzLnRyYWNrZWQgPSBmYWxzZVxuICAgICAgICB0aGlzLl9jcmVhdGlvbkRhdGUgPSBjcmVhdGlvbkRhdGU7XG4gICAgICAgIGlmICh0aGlzLl9jcmVhdGlvbkRhdGUgPT0gXCJcIikge1xuICAgICAgICAgICAgdmFyIG5vdyA9IG5ldyBEYXRlKClcbiAgICAgICAgICAgIHRoaXMuX2NyZWF0aW9uRGF0ZSA9IG5vdy50b0lTT1N0cmluZygpLnJlcGxhY2UoXCJUXCIsIFwiIFwiKS5zdWJzdHJpbmcoMCwgMTkpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3N1bW1hcnkgPSB0aGlzLmdldEluZm8oKTtcbiAgICB9XG4gICAgZ2V0IHRyYWNrZWQoKXsgcmV0dXJuIHRoaXMuX3RyYWNrZWQ7fVxuICAgIGdldCBzdW1tYXJ5KCl7IHJldHVybiB0aGlzLl9zdW1tYXJ5O31cbiAgICBzZXQgdHJhY2tlZCh2YWwpe3RoaXMuX3RyYWNrZWQgPSB2YWx9XG4gICAgYXN5bmMgcmVjYWxjdWxhdGVJRCAoKSB7XG4gICAgICAgIHRoaXMuaWQgPSBhd2FpdCBoYXNoKHRoaXMuX3N1bW1hcnkpO1xuICAgIH1cbiAgICBnZXRJbmZvKCkge1xuICAgICAgICBsZXQgaW5mbyA9IHRoaXMuX2ZpZWxkc0luZm8ubWFwKGluZm9QYWlyID0+IGluZm9QYWlyLmpvaW4oXCI6IFwiKSkuam9pbihcIlxcblwiKTtcbiAgICAgICAgaW5mbyArPSBcIlxcblwiO1xuICAgICAgICBpbmZvICs9IHRoaXMuX3Rhc2tzQW5kT3V0Y29tZXMubWFwKGluZm9QYWlyID0+IGluZm9QYWlyLmpvaW4oXCIgXCIpKS5qb2luKFwiXFxuXCIpO1xuICAgICAgICBpbmZvICs9IFwiXFxuXCI7XG4gICAgICAgIGluZm8gKz0gXCJDb21tZW50czpcXG5cIiArIHRoaXMuX2NvbW1lbnRzIHx8IFwiTkFcIjtcbiAgICAgICAgaW5mbyArPSBcIlxcblwiO1xuICAgICAgICBpbmZvICs9IFwiRGF0ZTogXCIgKyB0aGlzLl9jcmVhdGlvbkRhdGU7XG4gICAgICAgIHJldHVybiBpbmZvO1xuICAgIH1cbiAgICBcblxufSJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/task-record.js\n')},"./src/task.js":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return Task; });\n/* \n  MyTask \n  Defined by a single line string in the format:\n  TaskDescription::Outcome1/Outcome2...\n  where :: delimitts description and outcomes\n  and slash delimits each possible outcome\n */\nclass Task {\n    constructor(defString){\n        this._defString = defString;\n        let parts = this._defString.split("::");\n        if (parts.length != 2) {\n            throw new SyntaxError(\n                `Invalid Task definition: ${this._defString}`);\n        };\n        this._taskDescription = parts[0];\n        this._taskOutcomes = parts[1].split("/");\n        if (this._taskOutcomes.length == 0) {\n            throw new SyntaxError(\n                `Invalid Task definition: ${this._defString}\\n\n                missing outcomes`);\n        }\n    }\n    get taskDescription() {\n        return this._taskDescription;\n    }\n    get taskOutcomes (){\n        return this._taskOutcomes;\n    }\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdGFzay5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy90YXNrLmpzPzdjMTEiXSwic291cmNlc0NvbnRlbnQiOlsiLyogXG4gIE15VGFzayBcbiAgRGVmaW5lZCBieSBhIHNpbmdsZSBsaW5lIHN0cmluZyBpbiB0aGUgZm9ybWF0OlxuICBUYXNrRGVzY3JpcHRpb246Ok91dGNvbWUxL091dGNvbWUyLi4uXG4gIHdoZXJlIDo6IGRlbGltaXR0cyBkZXNjcmlwdGlvbiBhbmQgb3V0Y29tZXNcbiAgYW5kIHNsYXNoIGRlbGltaXRzIGVhY2ggcG9zc2libGUgb3V0Y29tZVxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUYXNrIHtcbiAgICBjb25zdHJ1Y3RvcihkZWZTdHJpbmcpe1xuICAgICAgICB0aGlzLl9kZWZTdHJpbmcgPSBkZWZTdHJpbmc7XG4gICAgICAgIGxldCBwYXJ0cyA9IHRoaXMuX2RlZlN0cmluZy5zcGxpdChcIjo6XCIpO1xuICAgICAgICBpZiAocGFydHMubGVuZ3RoICE9IDIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTeW50YXhFcnJvcihcbiAgICAgICAgICAgICAgICBgSW52YWxpZCBUYXNrIGRlZmluaXRpb246ICR7dGhpcy5fZGVmU3RyaW5nfWApO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLl90YXNrRGVzY3JpcHRpb24gPSBwYXJ0c1swXTtcbiAgICAgICAgdGhpcy5fdGFza091dGNvbWVzID0gcGFydHNbMV0uc3BsaXQoXCIvXCIpO1xuICAgICAgICBpZiAodGhpcy5fdGFza091dGNvbWVzLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgU3ludGF4RXJyb3IoXG4gICAgICAgICAgICAgICAgYEludmFsaWQgVGFzayBkZWZpbml0aW9uOiAke3RoaXMuX2RlZlN0cmluZ31cXG5cbiAgICAgICAgICAgICAgICBtaXNzaW5nIG91dGNvbWVzYCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IHRhc2tEZXNjcmlwdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Rhc2tEZXNjcmlwdGlvbjtcbiAgICB9XG4gICAgZ2V0IHRhc2tPdXRjb21lcyAoKXtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Rhc2tPdXRjb21lcztcbiAgICB9XG59Il0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/task.js\n')},"./src/tasks-tracking-helper.js":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return TasksTrackingHelper; });\n/* harmony import */ var _records_template_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./records-template.js */ "./src/records-template.js");\n/* harmony import */ var _records_group_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./records-group.js */ "./src/records-group.js");\n/* harmony import */ var _html_views_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./html-views.js */ "./src/html-views.js");\n/* harmony import */ var _task_record_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./task-record.js */ "./src/task-record.js");\n\n\n\n\n// Main Object Class\n// Defines the main general variables and functions to start the app\nclass TasksTrackingHelper {\n\n    constructor(){\n        this._recordsTemplates = this.loadTemplates();\n        this._selectedRecordsTemplate = this.loadSelectedTemplate();\n        this._recordsGroupList = this.loadRecordsGroupList();\n        this._selectedRecordsGroup = this.loadSelectedRecordsGroup(); \n        this._taskOutcomesSelected = [];\n        this._unsavedRecord =  null;\n        //this.loadUnsavedRecord();\n        this._htmlViews = new _html_views_js__WEBPACK_IMPORTED_MODULE_2__["default"](this);\n    }\n\n    storeUnsavedRecord(){\n        this.localSave("unsavedRecord", this._unsavedRecord);\n        this.localSave("unsavedOutcomes", this._taskOutcomesSelected);\n    }\n\n    resetUnsavedRecord(){\n        this._unsavedRecord._fieldsInfo.forEach(field => field[1] ="");\n        this._unsavedRecord._comments ="";\n        this._taskOutcomesSelected = [];\n        this._selectedRecordsTemplate.tasks\n            .forEach(() => this._taskOutcomesSelected.push(0), this);\n        this.storeUnsavedRecord();\n    }\n\n    loadUnsavedRecord(){\n        let recordObj = this.loadLocalJSON("unsavedRecord");\n        let comments = (recordObj) ? recordObj._comments : "";\n        let record = new _task_record_js__WEBPACK_IMPORTED_MODULE_3__["default"]([],[],comments,"");\n        let oldFieldsInfo = new Map(\n            (recordObj) ? recordObj._fieldsInfo : []\n        );\n        let rt = this._selectedRecordsTemplate;\n        let updatedFieldsInfo = [];\n        rt._inputFieldNames.forEach(fieldName => {\n            let value = (oldFieldsInfo.has(fieldName)) ?\n                oldFieldsInfo.get(fieldName) : "";\n            updatedFieldsInfo.push([fieldName, value]);\n        });\n        record._fieldsInfo = updatedFieldsInfo;\n        this._unsavedRecord = record;\n\n        let storedTaskOutcomes =\n            this.loadLocalJSON("unsavedOutcomes", this._taskOutcomesSelected)\n            || Array(rt.tasks.length).fill(0);\n        let updatedTaskOutcomes = Array(rt.tasks.length).fill(0);\n        let copyEnd = (storedTaskOutcomes.length >= rt.tasks.length) ?\n            rt.tasks.length :\n            storedTaskOutcomes.length;\n        for (let index = 0; index < copyEnd; index++) {\n            updatedTaskOutcomes[index] =\n                (storedTaskOutcomes[index] <=\n                    rt.tasks[index].taskOutcomes.length) ?\n                    storedTaskOutcomes[index] : 0;\n\n        }\n        storedTaskOutcomes = updatedTaskOutcomes; \n        this._taskOutcomesSelected = storedTaskOutcomes;\n    }\n    get recordsGroupList () {return this._recordsGroupList};\n    generateDefaultTemplateText() {\n        let defaultTemplate = "";\n        defaultTemplate +=\n            (this._recordsTemplates.get("Default")) ?\n                "Default " + new Date().toISOString() + "\\n":\n                "Default\\n";\n        defaultTemplate +=\n            "Fields:ID\\n" +\n            "Tasks:\\n" +\n            "Completed?::Yes/No";\n        return defaultTemplate;\n    }\n\n    loadRecordsGroupList(){\n        let rgl = this.loadLocalJSON(\'recordsGroupList\') || [];\n        return rgl;\n    }\n    storeRecordsGroupList(){\n        this.localSave(\'recordsGroupList\', this.recordsGroupList);\n    }\n\n    storeSelectedRecordsGroup(){\n        this.localSave("selectedRecordsGroup",this._selectedRecordsGroup.id );\n        this.localSave(this._selectedRecordsGroup.id , this._selectedRecordsGroup);\n    }\n\n    loadSelectedRecordsGroup(){\n        let recordsGroupID = localStorage.getItem("selectedRecordsGroup");\n        recordsGroupID = JSON.parse(recordsGroupID);\n        let rg = null;\n        if (recordsGroupID != null) {\n            let obj = this.loadLocalJSON(recordsGroupID);\n            if (obj !== null){\n                let records = obj._records.map(\n                    r => {\n                        let taskRecord = new _task_record_js__WEBPACK_IMPORTED_MODULE_3__["default"](\n                            r._fieldsInfo,\n                            r._tasksAndOutcomes,\n                            r._comments,\n                            r._creationDate);\n                        taskRecord.tracked = r._tracked;\n                        return taskRecord ;\n                    });\n                rg = new _records_group_js__WEBPACK_IMPORTED_MODULE_1__["default"](obj._name, obj._type, obj._date, records);\n            }  else {\n                rg = this.setupNewRecordsGroup(\'Default Group\',\'Default\');\n            } \n\n        } else {\n            rg = this.setupNewRecordsGroup(\'Default Group\', \'Default\');\n\n        }\n        if (this._recordsTemplates.has(rg.type) &&\n            (rg.type != this._selectedRecordsTemplate.name)) {\n                this.selectedRecordsTemplate = rg.type\n        } else if ( !this._recordsTemplates.has(rg.type)) {\n            rg.type = this._selectedRecordsTemplate.name;\n            this.storeSelectedRecordsGroup();\n        }\n        return rg;\n    }\n    deleteCurrentRecordsGroup(){\n        let currentID = this._selectedRecordsGroup.id;\n        this._recordsGroupList = this.recordsGroupList.filter( id => id != currentID );\n        this.storeRecordsGroupList();\n        this.localSave("selectedRecordsGroup", "");\n        localStorage.removeItem(currentID);\n        if (this.recordsGroupList.length > 0) {\n            this.localSave("selectedRecordsGroup", this.recordsGroupList[0]);\n        }\n        this._selectedRecordsGroup = this.loadSelectedRecordsGroup();\n    }\n    setupNewRecordsGroup(name, type){\n        let rg = new _records_group_js__WEBPACK_IMPORTED_MODULE_1__["default"](name,type);\n        this._recordsGroupList.push(rg.id);\n        this.storeRecordsGroupList();\n        this._selectedRecordsGroup = rg;\n        this.storeSelectedRecordsGroup();\n        return rg;\n    }\n    changeSelectedRecordsGroup(id) {\n        this.localSave("selectedRecordsGroup", id);\n        this._selectedRecordsGroup = this.loadSelectedRecordsGroup();\n    }\n    renameCurrentRecordsGroup(newName){\n        let repeated = this.recordsGroupList.includes(newName);\n        if (!repeated) {\n            let oldID = this._selectedRecordsGroup.id;\n            this._selectedRecordsGroup.name = newName;\n            this._recordsGroupList = this.recordsGroupList.filter( id => id != oldID);\n            this._recordsGroupList.push(newName);\n            this._recordsGroupList = this.recordsGroupList.sort();\n            this.storeRecordsGroupList();\n            this.storeSelectedRecordsGroup();\n            localStorage.removeItem(oldID);\n        }\n    }\n\n    get selectedRecordsTemplate(){\n        return this._selectedRecordsTemplate;\n    }\n    set selectedRecordsTemplate(name){\n        localStorage.setItem(\'selectedRecordsTemplate\', name);\n        this._selectedRecordsTemplate = this.loadSelectedTemplate();\n    }\n\n    updateSelectedTaskOutcome(taskIndex,outcomeIndex){\n        this._taskOutcomesSelected[taskIndex] = outcomeIndex;\n    }\n    \n    loadSelectedTemplate(){\n        let name = localStorage.getItem("selectedRecordsTemplate");\n        let rt  = name ? this._recordsTemplates.get(name): null;\n        if (rt === null) {\n            name = this._recordsTemplates.keys().next().value;\n            rt = this._recordsTemplates.get(name);\n            localStorage.setItem(\'selectedRecordsTemplate\', name);\n        }\n        return rt;\n    }\n\n\n    changeCurrentRecordsTemplate(text) {\n        let t = new _records_template_js__WEBPACK_IMPORTED_MODULE_0__["default"](text);\n        let currentName = this.selectedRecordsTemplate.name;\n        if (t.name != currentName) {\n            this._recordsTemplates.delete(currentName)\n        }\n        this._recordsTemplates.set(t.name, t);\n        this.selectedRecordsTemplate = t.name;\n        this.storeTemplates();\n        this.loadTemplates();\n        this._selectedRecordsGroup._type = t.name;\n        this.storeSelectedRecordsGroup();\n    }\n\n\n    storeTemplates(){\n        localStorage.setItem(\'selectedRecordsTemplate\', this.selectedRecordsTemplate.name);\n        let arr = Array.from(this._recordsTemplates).map( rt => rt[1].templateText);\n        localStorage.setItem("storedTemplates", JSON.stringify(arr));\n    }\n\n    addTemplate(text){\n        const rt = new _records_template_js__WEBPACK_IMPORTED_MODULE_0__["default"](text);\n        this._recordsTemplates.set(rt.name,rt);\n        this.selectedRecordsTemplate = rt.name;\n        this._selectedRecordsGroup.type = rt.name;\n        this.storeTemplates();\n        this.storeSelectedRecordsGroup();\n    }\n    deleteSelectedRecordsTemplate(){\n        let stName = this.selectedRecordsTemplate.name\n        this._recordsTemplates.delete(stName)\n        this.storeTemplates();\n        let newSelection = this._recordsTemplates.keys().next()\n        if (newSelection.value) {\n            this.selectedRecordsTemplate = newSelection.value;\n        } else {\n            this.loadTemplates();\n        }\n    }\n\n    loadTemplates(){\n        let jsonTemplates = this.loadLocalJSON(\'storedTemplates\');\n        this._recordsTemplates = new Map();\n        if (jsonTemplates != null) {\n            jsonTemplates.forEach(\n                templateText => {\n\n                    let rt = new _records_template_js__WEBPACK_IMPORTED_MODULE_0__["default"](templateText);\n                    if (rt){\n                        this._recordsTemplates.set(rt.name, rt);\n                    }\n                }\n            );\n        }\n        if (this._recordsTemplates.size == 0 ){\n            console.log("No stored templates, generating default")\n            let defaultTemplate =  this.generateDefaultTemplateText();\n            let rt = new _records_template_js__WEBPACK_IMPORTED_MODULE_0__["default"](defaultTemplate)\n            this._recordsTemplates.set(rt.name, rt);\n            this._selectedRecordsTemplate = rt;\n            this.storeTemplates();\n        }\n        return this._recordsTemplates;\n    }\n\n    localSave(key, obj) {\n        localStorage.setItem(key, JSON.stringify(obj));\n    }\n\n    loadLocalJSON (key) {\n        let jsonString =  localStorage.getItem(key);\n        return  ( jsonString != null) ?  JSON.parse(jsonString) : null;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdGFza3MtdHJhY2tpbmctaGVscGVyLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL3Rhc2tzLXRyYWNraW5nLWhlbHBlci5qcz9hNGYyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAgUmVjb3Jkc1RlbXBsYXRlIGZyb20gJy4vcmVjb3Jkcy10ZW1wbGF0ZS5qcyc7XG5pbXBvcnQgUmVjb3Jkc0dyb3VwIGZyb20gJy4vcmVjb3Jkcy1ncm91cC5qcyc7XG5pbXBvcnQgSFRNTFZpZXdzIGZyb20gJy4vaHRtbC12aWV3cy5qcyc7XG5pbXBvcnQgVGFza1JlY29yZCBmcm9tICcuL3Rhc2stcmVjb3JkLmpzJztcbi8vIE1haW4gT2JqZWN0IENsYXNzXG4vLyBEZWZpbmVzIHRoZSBtYWluIGdlbmVyYWwgdmFyaWFibGVzIGFuZCBmdW5jdGlvbnMgdG8gc3RhcnQgdGhlIGFwcFxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVGFza3NUcmFja2luZ0hlbHBlciB7XG5cbiAgICBjb25zdHJ1Y3Rvcigpe1xuICAgICAgICB0aGlzLl9yZWNvcmRzVGVtcGxhdGVzID0gdGhpcy5sb2FkVGVtcGxhdGVzKCk7XG4gICAgICAgIHRoaXMuX3NlbGVjdGVkUmVjb3Jkc1RlbXBsYXRlID0gdGhpcy5sb2FkU2VsZWN0ZWRUZW1wbGF0ZSgpO1xuICAgICAgICB0aGlzLl9yZWNvcmRzR3JvdXBMaXN0ID0gdGhpcy5sb2FkUmVjb3Jkc0dyb3VwTGlzdCgpO1xuICAgICAgICB0aGlzLl9zZWxlY3RlZFJlY29yZHNHcm91cCA9IHRoaXMubG9hZFNlbGVjdGVkUmVjb3Jkc0dyb3VwKCk7IFxuICAgICAgICB0aGlzLl90YXNrT3V0Y29tZXNTZWxlY3RlZCA9IFtdO1xuICAgICAgICB0aGlzLl91bnNhdmVkUmVjb3JkID0gIG51bGw7XG4gICAgICAgIC8vdGhpcy5sb2FkVW5zYXZlZFJlY29yZCgpO1xuICAgICAgICB0aGlzLl9odG1sVmlld3MgPSBuZXcgSFRNTFZpZXdzKHRoaXMpO1xuICAgIH1cblxuICAgIHN0b3JlVW5zYXZlZFJlY29yZCgpe1xuICAgICAgICB0aGlzLmxvY2FsU2F2ZShcInVuc2F2ZWRSZWNvcmRcIiwgdGhpcy5fdW5zYXZlZFJlY29yZCk7XG4gICAgICAgIHRoaXMubG9jYWxTYXZlKFwidW5zYXZlZE91dGNvbWVzXCIsIHRoaXMuX3Rhc2tPdXRjb21lc1NlbGVjdGVkKTtcbiAgICB9XG5cbiAgICByZXNldFVuc2F2ZWRSZWNvcmQoKXtcbiAgICAgICAgdGhpcy5fdW5zYXZlZFJlY29yZC5fZmllbGRzSW5mby5mb3JFYWNoKGZpZWxkID0+IGZpZWxkWzFdID1cIlwiKTtcbiAgICAgICAgdGhpcy5fdW5zYXZlZFJlY29yZC5fY29tbWVudHMgPVwiXCI7XG4gICAgICAgIHRoaXMuX3Rhc2tPdXRjb21lc1NlbGVjdGVkID0gW107XG4gICAgICAgIHRoaXMuX3NlbGVjdGVkUmVjb3Jkc1RlbXBsYXRlLnRhc2tzXG4gICAgICAgICAgICAuZm9yRWFjaCgoKSA9PiB0aGlzLl90YXNrT3V0Y29tZXNTZWxlY3RlZC5wdXNoKDApLCB0aGlzKTtcbiAgICAgICAgdGhpcy5zdG9yZVVuc2F2ZWRSZWNvcmQoKTtcbiAgICB9XG5cbiAgICBsb2FkVW5zYXZlZFJlY29yZCgpe1xuICAgICAgICBsZXQgcmVjb3JkT2JqID0gdGhpcy5sb2FkTG9jYWxKU09OKFwidW5zYXZlZFJlY29yZFwiKTtcbiAgICAgICAgbGV0IGNvbW1lbnRzID0gKHJlY29yZE9iaikgPyByZWNvcmRPYmouX2NvbW1lbnRzIDogXCJcIjtcbiAgICAgICAgbGV0IHJlY29yZCA9IG5ldyBUYXNrUmVjb3JkKFtdLFtdLGNvbW1lbnRzLFwiXCIpO1xuICAgICAgICBsZXQgb2xkRmllbGRzSW5mbyA9IG5ldyBNYXAoXG4gICAgICAgICAgICAocmVjb3JkT2JqKSA/IHJlY29yZE9iai5fZmllbGRzSW5mbyA6IFtdXG4gICAgICAgICk7XG4gICAgICAgIGxldCBydCA9IHRoaXMuX3NlbGVjdGVkUmVjb3Jkc1RlbXBsYXRlO1xuICAgICAgICBsZXQgdXBkYXRlZEZpZWxkc0luZm8gPSBbXTtcbiAgICAgICAgcnQuX2lucHV0RmllbGROYW1lcy5mb3JFYWNoKGZpZWxkTmFtZSA9PiB7XG4gICAgICAgICAgICBsZXQgdmFsdWUgPSAob2xkRmllbGRzSW5mby5oYXMoZmllbGROYW1lKSkgP1xuICAgICAgICAgICAgICAgIG9sZEZpZWxkc0luZm8uZ2V0KGZpZWxkTmFtZSkgOiBcIlwiO1xuICAgICAgICAgICAgdXBkYXRlZEZpZWxkc0luZm8ucHVzaChbZmllbGROYW1lLCB2YWx1ZV0pO1xuICAgICAgICB9KTtcbiAgICAgICAgcmVjb3JkLl9maWVsZHNJbmZvID0gdXBkYXRlZEZpZWxkc0luZm87XG4gICAgICAgIHRoaXMuX3Vuc2F2ZWRSZWNvcmQgPSByZWNvcmQ7XG5cbiAgICAgICAgbGV0IHN0b3JlZFRhc2tPdXRjb21lcyA9XG4gICAgICAgICAgICB0aGlzLmxvYWRMb2NhbEpTT04oXCJ1bnNhdmVkT3V0Y29tZXNcIiwgdGhpcy5fdGFza091dGNvbWVzU2VsZWN0ZWQpXG4gICAgICAgICAgICB8fCBBcnJheShydC50YXNrcy5sZW5ndGgpLmZpbGwoMCk7XG4gICAgICAgIGxldCB1cGRhdGVkVGFza091dGNvbWVzID0gQXJyYXkocnQudGFza3MubGVuZ3RoKS5maWxsKDApO1xuICAgICAgICBsZXQgY29weUVuZCA9IChzdG9yZWRUYXNrT3V0Y29tZXMubGVuZ3RoID49IHJ0LnRhc2tzLmxlbmd0aCkgP1xuICAgICAgICAgICAgcnQudGFza3MubGVuZ3RoIDpcbiAgICAgICAgICAgIHN0b3JlZFRhc2tPdXRjb21lcy5sZW5ndGg7XG4gICAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBjb3B5RW5kOyBpbmRleCsrKSB7XG4gICAgICAgICAgICB1cGRhdGVkVGFza091dGNvbWVzW2luZGV4XSA9XG4gICAgICAgICAgICAgICAgKHN0b3JlZFRhc2tPdXRjb21lc1tpbmRleF0gPD1cbiAgICAgICAgICAgICAgICAgICAgcnQudGFza3NbaW5kZXhdLnRhc2tPdXRjb21lcy5sZW5ndGgpID9cbiAgICAgICAgICAgICAgICAgICAgc3RvcmVkVGFza091dGNvbWVzW2luZGV4XSA6IDA7XG5cbiAgICAgICAgfVxuICAgICAgICBzdG9yZWRUYXNrT3V0Y29tZXMgPSB1cGRhdGVkVGFza091dGNvbWVzOyBcbiAgICAgICAgdGhpcy5fdGFza091dGNvbWVzU2VsZWN0ZWQgPSBzdG9yZWRUYXNrT3V0Y29tZXM7XG4gICAgfVxuICAgIGdldCByZWNvcmRzR3JvdXBMaXN0ICgpIHtyZXR1cm4gdGhpcy5fcmVjb3Jkc0dyb3VwTGlzdH07XG4gICAgZ2VuZXJhdGVEZWZhdWx0VGVtcGxhdGVUZXh0KCkge1xuICAgICAgICBsZXQgZGVmYXVsdFRlbXBsYXRlID0gXCJcIjtcbiAgICAgICAgZGVmYXVsdFRlbXBsYXRlICs9XG4gICAgICAgICAgICAodGhpcy5fcmVjb3Jkc1RlbXBsYXRlcy5nZXQoXCJEZWZhdWx0XCIpKSA/XG4gICAgICAgICAgICAgICAgXCJEZWZhdWx0IFwiICsgbmV3IERhdGUoKS50b0lTT1N0cmluZygpICsgXCJcXG5cIjpcbiAgICAgICAgICAgICAgICBcIkRlZmF1bHRcXG5cIjtcbiAgICAgICAgZGVmYXVsdFRlbXBsYXRlICs9XG4gICAgICAgICAgICBcIkZpZWxkczpJRFxcblwiICtcbiAgICAgICAgICAgIFwiVGFza3M6XFxuXCIgK1xuICAgICAgICAgICAgXCJDb21wbGV0ZWQ/OjpZZXMvTm9cIjtcbiAgICAgICAgcmV0dXJuIGRlZmF1bHRUZW1wbGF0ZTtcbiAgICB9XG5cbiAgICBsb2FkUmVjb3Jkc0dyb3VwTGlzdCgpe1xuICAgICAgICBsZXQgcmdsID0gdGhpcy5sb2FkTG9jYWxKU09OKCdyZWNvcmRzR3JvdXBMaXN0JykgfHwgW107XG4gICAgICAgIHJldHVybiByZ2w7XG4gICAgfVxuICAgIHN0b3JlUmVjb3Jkc0dyb3VwTGlzdCgpe1xuICAgICAgICB0aGlzLmxvY2FsU2F2ZSgncmVjb3Jkc0dyb3VwTGlzdCcsIHRoaXMucmVjb3Jkc0dyb3VwTGlzdCk7XG4gICAgfVxuXG4gICAgc3RvcmVTZWxlY3RlZFJlY29yZHNHcm91cCgpe1xuICAgICAgICB0aGlzLmxvY2FsU2F2ZShcInNlbGVjdGVkUmVjb3Jkc0dyb3VwXCIsdGhpcy5fc2VsZWN0ZWRSZWNvcmRzR3JvdXAuaWQgKTtcbiAgICAgICAgdGhpcy5sb2NhbFNhdmUodGhpcy5fc2VsZWN0ZWRSZWNvcmRzR3JvdXAuaWQgLCB0aGlzLl9zZWxlY3RlZFJlY29yZHNHcm91cCk7XG4gICAgfVxuXG4gICAgbG9hZFNlbGVjdGVkUmVjb3Jkc0dyb3VwKCl7XG4gICAgICAgIGxldCByZWNvcmRzR3JvdXBJRCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwic2VsZWN0ZWRSZWNvcmRzR3JvdXBcIik7XG4gICAgICAgIHJlY29yZHNHcm91cElEID0gSlNPTi5wYXJzZShyZWNvcmRzR3JvdXBJRCk7XG4gICAgICAgIGxldCByZyA9IG51bGw7XG4gICAgICAgIGlmIChyZWNvcmRzR3JvdXBJRCAhPSBudWxsKSB7XG4gICAgICAgICAgICBsZXQgb2JqID0gdGhpcy5sb2FkTG9jYWxKU09OKHJlY29yZHNHcm91cElEKTtcbiAgICAgICAgICAgIGlmIChvYmogIT09IG51bGwpe1xuICAgICAgICAgICAgICAgIGxldCByZWNvcmRzID0gb2JqLl9yZWNvcmRzLm1hcChcbiAgICAgICAgICAgICAgICAgICAgciA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgdGFza1JlY29yZCA9IG5ldyBUYXNrUmVjb3JkKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIuX2ZpZWxkc0luZm8sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgci5fdGFza3NBbmRPdXRjb21lcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByLl9jb21tZW50cyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByLl9jcmVhdGlvbkRhdGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFza1JlY29yZC50cmFja2VkID0gci5fdHJhY2tlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0YXNrUmVjb3JkIDtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmcgPSBuZXcgUmVjb3Jkc0dyb3VwKG9iai5fbmFtZSwgb2JqLl90eXBlLCBvYmouX2RhdGUsIHJlY29yZHMpO1xuICAgICAgICAgICAgfSAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmcgPSB0aGlzLnNldHVwTmV3UmVjb3Jkc0dyb3VwKCdEZWZhdWx0IEdyb3VwJywnRGVmYXVsdCcpO1xuICAgICAgICAgICAgfSBcblxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmcgPSB0aGlzLnNldHVwTmV3UmVjb3Jkc0dyb3VwKCdEZWZhdWx0IEdyb3VwJywgJ0RlZmF1bHQnKTtcblxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9yZWNvcmRzVGVtcGxhdGVzLmhhcyhyZy50eXBlKSAmJlxuICAgICAgICAgICAgKHJnLnR5cGUgIT0gdGhpcy5fc2VsZWN0ZWRSZWNvcmRzVGVtcGxhdGUubmFtZSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkUmVjb3Jkc1RlbXBsYXRlID0gcmcudHlwZVxuICAgICAgICB9IGVsc2UgaWYgKCAhdGhpcy5fcmVjb3Jkc1RlbXBsYXRlcy5oYXMocmcudHlwZSkpIHtcbiAgICAgICAgICAgIHJnLnR5cGUgPSB0aGlzLl9zZWxlY3RlZFJlY29yZHNUZW1wbGF0ZS5uYW1lO1xuICAgICAgICAgICAgdGhpcy5zdG9yZVNlbGVjdGVkUmVjb3Jkc0dyb3VwKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJnO1xuICAgIH1cbiAgICBkZWxldGVDdXJyZW50UmVjb3Jkc0dyb3VwKCl7XG4gICAgICAgIGxldCBjdXJyZW50SUQgPSB0aGlzLl9zZWxlY3RlZFJlY29yZHNHcm91cC5pZDtcbiAgICAgICAgdGhpcy5fcmVjb3Jkc0dyb3VwTGlzdCA9IHRoaXMucmVjb3Jkc0dyb3VwTGlzdC5maWx0ZXIoIGlkID0+IGlkICE9IGN1cnJlbnRJRCApO1xuICAgICAgICB0aGlzLnN0b3JlUmVjb3Jkc0dyb3VwTGlzdCgpO1xuICAgICAgICB0aGlzLmxvY2FsU2F2ZShcInNlbGVjdGVkUmVjb3Jkc0dyb3VwXCIsIFwiXCIpO1xuICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShjdXJyZW50SUQpO1xuICAgICAgICBpZiAodGhpcy5yZWNvcmRzR3JvdXBMaXN0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHRoaXMubG9jYWxTYXZlKFwic2VsZWN0ZWRSZWNvcmRzR3JvdXBcIiwgdGhpcy5yZWNvcmRzR3JvdXBMaXN0WzBdKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9zZWxlY3RlZFJlY29yZHNHcm91cCA9IHRoaXMubG9hZFNlbGVjdGVkUmVjb3Jkc0dyb3VwKCk7XG4gICAgfVxuICAgIHNldHVwTmV3UmVjb3Jkc0dyb3VwKG5hbWUsIHR5cGUpe1xuICAgICAgICBsZXQgcmcgPSBuZXcgUmVjb3Jkc0dyb3VwKG5hbWUsdHlwZSk7XG4gICAgICAgIHRoaXMuX3JlY29yZHNHcm91cExpc3QucHVzaChyZy5pZCk7XG4gICAgICAgIHRoaXMuc3RvcmVSZWNvcmRzR3JvdXBMaXN0KCk7XG4gICAgICAgIHRoaXMuX3NlbGVjdGVkUmVjb3Jkc0dyb3VwID0gcmc7XG4gICAgICAgIHRoaXMuc3RvcmVTZWxlY3RlZFJlY29yZHNHcm91cCgpO1xuICAgICAgICByZXR1cm4gcmc7XG4gICAgfVxuICAgIGNoYW5nZVNlbGVjdGVkUmVjb3Jkc0dyb3VwKGlkKSB7XG4gICAgICAgIHRoaXMubG9jYWxTYXZlKFwic2VsZWN0ZWRSZWNvcmRzR3JvdXBcIiwgaWQpO1xuICAgICAgICB0aGlzLl9zZWxlY3RlZFJlY29yZHNHcm91cCA9IHRoaXMubG9hZFNlbGVjdGVkUmVjb3Jkc0dyb3VwKCk7XG4gICAgfVxuICAgIHJlbmFtZUN1cnJlbnRSZWNvcmRzR3JvdXAobmV3TmFtZSl7XG4gICAgICAgIGxldCByZXBlYXRlZCA9IHRoaXMucmVjb3Jkc0dyb3VwTGlzdC5pbmNsdWRlcyhuZXdOYW1lKTtcbiAgICAgICAgaWYgKCFyZXBlYXRlZCkge1xuICAgICAgICAgICAgbGV0IG9sZElEID0gdGhpcy5fc2VsZWN0ZWRSZWNvcmRzR3JvdXAuaWQ7XG4gICAgICAgICAgICB0aGlzLl9zZWxlY3RlZFJlY29yZHNHcm91cC5uYW1lID0gbmV3TmFtZTtcbiAgICAgICAgICAgIHRoaXMuX3JlY29yZHNHcm91cExpc3QgPSB0aGlzLnJlY29yZHNHcm91cExpc3QuZmlsdGVyKCBpZCA9PiBpZCAhPSBvbGRJRCk7XG4gICAgICAgICAgICB0aGlzLl9yZWNvcmRzR3JvdXBMaXN0LnB1c2gobmV3TmFtZSk7XG4gICAgICAgICAgICB0aGlzLl9yZWNvcmRzR3JvdXBMaXN0ID0gdGhpcy5yZWNvcmRzR3JvdXBMaXN0LnNvcnQoKTtcbiAgICAgICAgICAgIHRoaXMuc3RvcmVSZWNvcmRzR3JvdXBMaXN0KCk7XG4gICAgICAgICAgICB0aGlzLnN0b3JlU2VsZWN0ZWRSZWNvcmRzR3JvdXAoKTtcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKG9sZElEKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldCBzZWxlY3RlZFJlY29yZHNUZW1wbGF0ZSgpe1xuICAgICAgICByZXR1cm4gdGhpcy5fc2VsZWN0ZWRSZWNvcmRzVGVtcGxhdGU7XG4gICAgfVxuICAgIHNldCBzZWxlY3RlZFJlY29yZHNUZW1wbGF0ZShuYW1lKXtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3NlbGVjdGVkUmVjb3Jkc1RlbXBsYXRlJywgbmFtZSk7XG4gICAgICAgIHRoaXMuX3NlbGVjdGVkUmVjb3Jkc1RlbXBsYXRlID0gdGhpcy5sb2FkU2VsZWN0ZWRUZW1wbGF0ZSgpO1xuICAgIH1cblxuICAgIHVwZGF0ZVNlbGVjdGVkVGFza091dGNvbWUodGFza0luZGV4LG91dGNvbWVJbmRleCl7XG4gICAgICAgIHRoaXMuX3Rhc2tPdXRjb21lc1NlbGVjdGVkW3Rhc2tJbmRleF0gPSBvdXRjb21lSW5kZXg7XG4gICAgfVxuICAgIFxuICAgIGxvYWRTZWxlY3RlZFRlbXBsYXRlKCl7XG4gICAgICAgIGxldCBuYW1lID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJzZWxlY3RlZFJlY29yZHNUZW1wbGF0ZVwiKTtcbiAgICAgICAgbGV0IHJ0ICA9IG5hbWUgPyB0aGlzLl9yZWNvcmRzVGVtcGxhdGVzLmdldChuYW1lKTogbnVsbDtcbiAgICAgICAgaWYgKHJ0ID09PSBudWxsKSB7XG4gICAgICAgICAgICBuYW1lID0gdGhpcy5fcmVjb3Jkc1RlbXBsYXRlcy5rZXlzKCkubmV4dCgpLnZhbHVlO1xuICAgICAgICAgICAgcnQgPSB0aGlzLl9yZWNvcmRzVGVtcGxhdGVzLmdldChuYW1lKTtcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdzZWxlY3RlZFJlY29yZHNUZW1wbGF0ZScsIG5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBydDtcbiAgICB9XG5cblxuICAgIGNoYW5nZUN1cnJlbnRSZWNvcmRzVGVtcGxhdGUodGV4dCkge1xuICAgICAgICBsZXQgdCA9IG5ldyBSZWNvcmRzVGVtcGxhdGUodGV4dCk7XG4gICAgICAgIGxldCBjdXJyZW50TmFtZSA9IHRoaXMuc2VsZWN0ZWRSZWNvcmRzVGVtcGxhdGUubmFtZTtcbiAgICAgICAgaWYgKHQubmFtZSAhPSBjdXJyZW50TmFtZSkge1xuICAgICAgICAgICAgdGhpcy5fcmVjb3Jkc1RlbXBsYXRlcy5kZWxldGUoY3VycmVudE5hbWUpXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fcmVjb3Jkc1RlbXBsYXRlcy5zZXQodC5uYW1lLCB0KTtcbiAgICAgICAgdGhpcy5zZWxlY3RlZFJlY29yZHNUZW1wbGF0ZSA9IHQubmFtZTtcbiAgICAgICAgdGhpcy5zdG9yZVRlbXBsYXRlcygpO1xuICAgICAgICB0aGlzLmxvYWRUZW1wbGF0ZXMoKTtcbiAgICAgICAgdGhpcy5fc2VsZWN0ZWRSZWNvcmRzR3JvdXAuX3R5cGUgPSB0Lm5hbWU7XG4gICAgICAgIHRoaXMuc3RvcmVTZWxlY3RlZFJlY29yZHNHcm91cCgpO1xuICAgIH1cblxuXG4gICAgc3RvcmVUZW1wbGF0ZXMoKXtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3NlbGVjdGVkUmVjb3Jkc1RlbXBsYXRlJywgdGhpcy5zZWxlY3RlZFJlY29yZHNUZW1wbGF0ZS5uYW1lKTtcbiAgICAgICAgbGV0IGFyciA9IEFycmF5LmZyb20odGhpcy5fcmVjb3Jkc1RlbXBsYXRlcykubWFwKCBydCA9PiBydFsxXS50ZW1wbGF0ZVRleHQpO1xuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInN0b3JlZFRlbXBsYXRlc1wiLCBKU09OLnN0cmluZ2lmeShhcnIpKTtcbiAgICB9XG5cbiAgICBhZGRUZW1wbGF0ZSh0ZXh0KXtcbiAgICAgICAgY29uc3QgcnQgPSBuZXcgUmVjb3Jkc1RlbXBsYXRlKHRleHQpO1xuICAgICAgICB0aGlzLl9yZWNvcmRzVGVtcGxhdGVzLnNldChydC5uYW1lLHJ0KTtcbiAgICAgICAgdGhpcy5zZWxlY3RlZFJlY29yZHNUZW1wbGF0ZSA9IHJ0Lm5hbWU7XG4gICAgICAgIHRoaXMuX3NlbGVjdGVkUmVjb3Jkc0dyb3VwLnR5cGUgPSBydC5uYW1lO1xuICAgICAgICB0aGlzLnN0b3JlVGVtcGxhdGVzKCk7XG4gICAgICAgIHRoaXMuc3RvcmVTZWxlY3RlZFJlY29yZHNHcm91cCgpO1xuICAgIH1cbiAgICBkZWxldGVTZWxlY3RlZFJlY29yZHNUZW1wbGF0ZSgpe1xuICAgICAgICBsZXQgc3ROYW1lID0gdGhpcy5zZWxlY3RlZFJlY29yZHNUZW1wbGF0ZS5uYW1lXG4gICAgICAgIHRoaXMuX3JlY29yZHNUZW1wbGF0ZXMuZGVsZXRlKHN0TmFtZSlcbiAgICAgICAgdGhpcy5zdG9yZVRlbXBsYXRlcygpO1xuICAgICAgICBsZXQgbmV3U2VsZWN0aW9uID0gdGhpcy5fcmVjb3Jkc1RlbXBsYXRlcy5rZXlzKCkubmV4dCgpXG4gICAgICAgIGlmIChuZXdTZWxlY3Rpb24udmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRSZWNvcmRzVGVtcGxhdGUgPSBuZXdTZWxlY3Rpb24udmFsdWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmxvYWRUZW1wbGF0ZXMoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGxvYWRUZW1wbGF0ZXMoKXtcbiAgICAgICAgbGV0IGpzb25UZW1wbGF0ZXMgPSB0aGlzLmxvYWRMb2NhbEpTT04oJ3N0b3JlZFRlbXBsYXRlcycpO1xuICAgICAgICB0aGlzLl9yZWNvcmRzVGVtcGxhdGVzID0gbmV3IE1hcCgpO1xuICAgICAgICBpZiAoanNvblRlbXBsYXRlcyAhPSBudWxsKSB7XG4gICAgICAgICAgICBqc29uVGVtcGxhdGVzLmZvckVhY2goXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVUZXh0ID0+IHtcblxuICAgICAgICAgICAgICAgICAgICBsZXQgcnQgPSBuZXcgUmVjb3Jkc1RlbXBsYXRlKHRlbXBsYXRlVGV4dCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChydCl7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9yZWNvcmRzVGVtcGxhdGVzLnNldChydC5uYW1lLCBydCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9yZWNvcmRzVGVtcGxhdGVzLnNpemUgPT0gMCApe1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJObyBzdG9yZWQgdGVtcGxhdGVzLCBnZW5lcmF0aW5nIGRlZmF1bHRcIilcbiAgICAgICAgICAgIGxldCBkZWZhdWx0VGVtcGxhdGUgPSAgdGhpcy5nZW5lcmF0ZURlZmF1bHRUZW1wbGF0ZVRleHQoKTtcbiAgICAgICAgICAgIGxldCBydCA9IG5ldyBSZWNvcmRzVGVtcGxhdGUoZGVmYXVsdFRlbXBsYXRlKVxuICAgICAgICAgICAgdGhpcy5fcmVjb3Jkc1RlbXBsYXRlcy5zZXQocnQubmFtZSwgcnQpO1xuICAgICAgICAgICAgdGhpcy5fc2VsZWN0ZWRSZWNvcmRzVGVtcGxhdGUgPSBydDtcbiAgICAgICAgICAgIHRoaXMuc3RvcmVUZW1wbGF0ZXMoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fcmVjb3Jkc1RlbXBsYXRlcztcbiAgICB9XG5cbiAgICBsb2NhbFNhdmUoa2V5LCBvYmopIHtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oa2V5LCBKU09OLnN0cmluZ2lmeShvYmopKTtcbiAgICB9XG5cbiAgICBsb2FkTG9jYWxKU09OIChrZXkpIHtcbiAgICAgICAgbGV0IGpzb25TdHJpbmcgPSAgbG9jYWxTdG9yYWdlLmdldEl0ZW0oa2V5KTtcbiAgICAgICAgcmV0dXJuICAoIGpzb25TdHJpbmcgIT0gbnVsbCkgPyAgSlNPTi5wYXJzZShqc29uU3RyaW5nKSA6IG51bGw7XG4gICAgfVxufVxuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/tasks-tracking-helper.js\n')},"./src/trh.js":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "copyToClipboard", function() { return copyToClipboard; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "copyInputToClipboard", function() { return copyInputToClipboard; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hash", function() { return hash; });\n// Sipmple general use functions\nfunction copyToClipboard(divID) {\n    var r = document.createRange();\n    r.selectNode(document.getElementById(divID));\n    window.getSelection().removeAllRanges();\n    window.getSelection().addRange(r);\n    document.execCommand("copy");\n    window.getSelection().removeAllRanges();\n}\nfunction copyInputToClipboard(inputID) {\n    document.getSelection().removeAllRanges();\n    document.getElementById(inputID).select();\n    document.execCommand("copy");\n    document.getSelection().removeAllRanges();\n}\nasync function hash(text) {\n    const msgUint8 = new TextEncoder().encode(text);\n    const buffer = await crypto.subtle.digest(\'SHA-256\', msgUint8);\n    const hashArray = Array.from(new Uint8Array(buffer));\n    const hex = hashArray.map(b => b.toString(16).padStart(2, \'0\')).join(\'\');\n    return hex;\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdHJoLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL3RyaC5qcz9hNDhmIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFNpcG1wbGUgZ2VuZXJhbCB1c2UgZnVuY3Rpb25zXG5leHBvcnQgZnVuY3Rpb24gY29weVRvQ2xpcGJvYXJkKGRpdklEKSB7XG4gICAgdmFyIHIgPSBkb2N1bWVudC5jcmVhdGVSYW5nZSgpO1xuICAgIHIuc2VsZWN0Tm9kZShkb2N1bWVudC5nZXRFbGVtZW50QnlJZChkaXZJRCkpO1xuICAgIHdpbmRvdy5nZXRTZWxlY3Rpb24oKS5yZW1vdmVBbGxSYW5nZXMoKTtcbiAgICB3aW5kb3cuZ2V0U2VsZWN0aW9uKCkuYWRkUmFuZ2Uocik7XG4gICAgZG9jdW1lbnQuZXhlY0NvbW1hbmQoXCJjb3B5XCIpO1xuICAgIHdpbmRvdy5nZXRTZWxlY3Rpb24oKS5yZW1vdmVBbGxSYW5nZXMoKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBjb3B5SW5wdXRUb0NsaXBib2FyZChpbnB1dElEKSB7XG4gICAgZG9jdW1lbnQuZ2V0U2VsZWN0aW9uKCkucmVtb3ZlQWxsUmFuZ2VzKCk7XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaW5wdXRJRCkuc2VsZWN0KCk7XG4gICAgZG9jdW1lbnQuZXhlY0NvbW1hbmQoXCJjb3B5XCIpO1xuICAgIGRvY3VtZW50LmdldFNlbGVjdGlvbigpLnJlbW92ZUFsbFJhbmdlcygpO1xufVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGhhc2godGV4dCkge1xuICAgIGNvbnN0IG1zZ1VpbnQ4ID0gbmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKHRleHQpO1xuICAgIGNvbnN0IGJ1ZmZlciA9IGF3YWl0IGNyeXB0by5zdWJ0bGUuZGlnZXN0KCdTSEEtMjU2JywgbXNnVWludDgpO1xuICAgIGNvbnN0IGhhc2hBcnJheSA9IEFycmF5LmZyb20obmV3IFVpbnQ4QXJyYXkoYnVmZmVyKSk7XG4gICAgY29uc3QgaGV4ID0gaGFzaEFycmF5Lm1hcChiID0+IGIudG9TdHJpbmcoMTYpLnBhZFN0YXJ0KDIsICcwJykpLmpvaW4oJycpO1xuICAgIHJldHVybiBoZXg7XG59XG5cblxuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/trh.js\n')}});</script></body>


</html>
